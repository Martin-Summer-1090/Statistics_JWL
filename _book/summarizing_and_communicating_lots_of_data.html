<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Statistics - 3&nbsp; Summarizing and communicating lots of data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./from_limited_data_to_populations.html" rel="next">
<link href="./categorical_data_and_proportions.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./summarizing_and_communicating_lots_of_data.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Summarizing and communicating lots of data</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Statistics</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title"><strong>Introduction</strong></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./categorical_data_and_proportions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Categorical Data and Proportions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summarizing_and_communicating_lots_of_data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Summarizing and communicating lots of data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./from_limited_data_to_populations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">From limited data to populations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./what_causes_what.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">What causes what?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modelling_relationships_using_regression_part_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Modelling relationships: Points, Lines and Scatterplots</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modelling_relationships_using_regression_part_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Modelling relationship: Prediction using regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./how_sure_can_we_be.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">How sure can we be about what is going on</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Probability: Quantifying uncertainty and variablility</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_and_statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Putting probability and statistics together</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./answering_questions_and_claiming_discoveries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Answering questions and claiming discoveries</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#the-histogram" id="toc-the-histogram" class="nav-link active" data-scroll-target="#the-histogram"><span class="header-section-number">3.1</span> The histogram</a>
  <ul class="collapse">
  <li><a href="#constructing-a-histogram" id="toc-constructing-a-histogram" class="nav-link" data-scroll-target="#constructing-a-histogram"><span class="header-section-number">3.1.1</span> Constructing a histogram</a></li>
  <li><a href="#the-relative-frequency-scale-absolute-versus-relative-frequency" id="toc-the-relative-frequency-scale-absolute-versus-relative-frequency" class="nav-link" data-scroll-target="#the-relative-frequency-scale-absolute-versus-relative-frequency"><span class="header-section-number">3.1.2</span> The relative frequency scale: Absolute versus relative frequency</a></li>
  <li><a href="#best-practices-for-histograms" id="toc-best-practices-for-histograms" class="nav-link" data-scroll-target="#best-practices-for-histograms"><span class="header-section-number">3.1.3</span> Best practices for histograms</a></li>
  </ul></li>
  <li><a href="#the-average-and-the-standard-deviation" id="toc-the-average-and-the-standard-deviation" class="nav-link" data-scroll-target="#the-average-and-the-standard-deviation"><span class="header-section-number">3.2</span> The average and the standard deviation</a>
  <ul class="collapse">
  <li><a href="#the-average" id="toc-the-average" class="nav-link" data-scroll-target="#the-average"><span class="header-section-number">3.2.1</span> The average</a></li>
  <li><a href="#the-standard-deviation" id="toc-the-standard-deviation" class="nav-link" data-scroll-target="#the-standard-deviation"><span class="header-section-number">3.2.2</span> The standard deviation</a></li>
  <li><a href="#computing-the-standard-deviation" id="toc-computing-the-standard-deviation" class="nav-link" data-scroll-target="#computing-the-standard-deviation"><span class="header-section-number">3.2.3</span> Computing the standard deviation</a></li>
  <li><a href="#the-r-implementation-of-sd" id="toc-the-r-implementation-of-sd" class="nav-link" data-scroll-target="#the-r-implementation-of-sd"><span class="header-section-number">3.2.4</span> The R implementation of sd()</a></li>
  </ul></li>
  <li><a href="#sec-moreR" id="toc-sec-moreR" class="nav-link" data-scroll-target="#sec-moreR"><span class="header-section-number">3.3</span> Bigger datasets and more R</a>
  <ul class="collapse">
  <li><a href="#vectors-and-indices" id="toc-vectors-and-indices" class="nav-link" data-scroll-target="#vectors-and-indices"><span class="header-section-number">3.3.1</span> Vectors and indices</a></li>
  <li><a href="#selecting-more-than-one-observation" id="toc-selecting-more-than-one-observation" class="nav-link" data-scroll-target="#selecting-more-than-one-observation"><span class="header-section-number">3.3.2</span> Selecting more than one observation</a></li>
  <li><a href="#logical-subsetting-coercion-rules-and-recycling" id="toc-logical-subsetting-coercion-rules-and-recycling" class="nav-link" data-scroll-target="#logical-subsetting-coercion-rules-and-recycling"><span class="header-section-number">3.3.3</span> Logical subsetting, coercion rules and recycling</a></li>
  <li><a href="#data-frames" id="toc-data-frames" class="nav-link" data-scroll-target="#data-frames"><span class="header-section-number">3.3.4</span> Data Frames</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">3.4</span> Summary</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="header-section-number">3.5</span> Exercises</a>
  <ul class="collapse">
  <li><a href="#exercises-1" id="toc-exercises-1" class="nav-link" data-scroll-target="#exercises-1"><span class="header-section-number">3.5.1</span> Exercises:</a></li>
  <li><a href="#exercises-r" id="toc-exercises-r" class="nav-link" data-scroll-target="#exercises-r"><span class="header-section-number">3.5.2</span> Exercises R</a></li>
  <li><a href="#exercise-project" id="toc-exercise-project" class="nav-link" data-scroll-target="#exercise-project"><span class="header-section-number">3.5.3</span> Exercise Project:</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Summarizing and communicating lots of data</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Overview
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>In this chapter we will learn <strong>how to summarize and communicate lots of data</strong>. Most datasets you will be working with in statistics are large and can contain thousands or even millions of observations. To understand these data and their pattern of variation you need tools to summarize them in a meaningful and informative way. In this chapter you will learn the tools to do so.</p></li>
<li><p>We first discuss a graphical tool to summarize the variation in a single variable by organizing the data in a way that shows us a the distribution of these data. This tool is called a <strong>histogram</strong> and you will encounter it very often across all applied data work and across all of statistics. To get a good understanding how to construct and work with a histogram, we first work with an example you can in principle do without a computer. This is useful to understand the basic principles of constructing and reading a histogram.</p></li>
<li><p>You will also learn to summarize large datasets by single numbers that provide information about the central tendency of the values of a variable. The <strong>mean</strong> is such a number, used over and over in statistics. You will learn what a mean is, what it tells you and when it gives a meaningful summary about the center of the distribution of a variable.</p></li>
<li><p>For a summary of a large dataset by numbers, you need not only an idea of at which values of a variable the data are centered but also how much they are spread out around this value. Such a measure of spread is the <strong>standard deviation</strong>. Like the mean understanding and working with standard deviations is fundamental and will be encountered over and over again throughout the large field of statistics and applied work with data. You need to gain a good understanding of what the standard deviation is and how to compute it.</p></li>
<li><p>For larger datasets, which will be the usual case in practice, you will need to <strong>learn how to summarize and communicate the information about variables with lost of different values using the computer</strong>. This means in particular, that you need to understand how to read large datafiles from a given source, how to select and modify particular variables. You will thus learn some powerful tools from the R language that will help you to do so.</p></li>
</ol>
<p>When you have worked through this unit you will be able to <strong>summarize large datasets graphically and numerically</strong> and understand what these measures tell you about the variation in the data, how they look like, what are the most typical values of the variables and how much they are spread out around these values. In this process you will power up your abilities to read, select and manipulate large data files and single variables using the R language. This will enlarge your abilities to work with data by a huge and important step.</p>
</div>
</div>
<div class="page-columns page-full"><p>When we analyze data, we usually have to look at lots of them. As a leading example, let us take the case of anthropometric data. These are data measuring height and weight of humans in a population.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. These data are usually gathered via large population survey like the Demographic and Health Survey, abbreviated DHS<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;Anthropometry (This is a word with roots from ancient greek. In ancient greek anthropos means ‘human’, and métron means ‘measure’. Anthropometry thus refers to the measurement of the human individual. An early tool of physical anthropology, it has been used for identification, for the purposes of understanding human physical variation</p></li><li id="fn2"><p><sup>2</sup>&nbsp;The DHS program, a US based program on demographics and health in various parts of the developing world. The data are used to monitor demographic and health developments to decide where policy action might be needed. The DHS website can be found here: https://dhsprogram.com/ </p></li></div></div>
<p>What’s the point of recording the height and weight of humans? First of all, human growth depends on good nutrition and the availability of medical services to effectively treat illness. Thus human height in a population has for a long time been a subject of study. The average human height in a population varies with the general living standards. This fact makes data on human height especially interesting for historians who study the history of living conditions. Because humans tend to get taller when they have good living conditions, human height can reveal some information on living conditions, height data can be an indirect measure of living conditions. This is especially interesting for periods when very little or no data were collected and recorded.</p>
<div class="page-columns page-full"><p>But also today information about the distribution of height and weight in a population enables countries to make data-driven decisions and to monitor their progress in improving nutritional status and achieving the United Nation’s Sustainable Development Goals.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn3"><p><sup>3</sup>&nbsp; The Sustainable Development Goals (SDGs) or Global Goals are a collection of seventeen interlinked objectives designed to serve as a “shared blueprint for peace and prosperity for people and the planet, now and into the future.” The goals were set and decided by the United Nations General Assembly and are monitored through various data collection efforts, including the DHS. The short titles of the 17 SDGs are: No poverty (SDG 1), Zero hunger (SDG 2), Good health and well-being (SDG 3), Quality education (SDG 4), Gender equality (SDG 5), Clean water and sanitation (SDG 6), Affordable and clean energy (SDG 7), Decent work and economic growth (SDG 8), Industry, innovation and infrastructure (SDG 9), Reduced inequalities (SDG 10), Sustainable cities and communities (SDG 11), Responsible consumption and production (SDG 12), Climate action (SDG 13), Life below water (SDG 14), Life on land (SDG 15), Peace, justice, and strong institutions (SDG 16), Partnerships for the goals (SDG 17). See also the website: https://sdgs.un.org/goals</p></li></div></div>
<p>The measurement of human height and weight are also important in the history of statistics. Especially important concepts describing the statistical relation between two variables, were detected in this context. We will learn about these concepts later, when we study the statistical tool of regression.</p>
<p>We will use a dataset from the DHS later in this chapter, when we discuss how to use R to deal with large datasets. The number of observations in this case is 2559. This is not very big but certainly too big to reasonably handle by hand. With a computer this becomes realistic.</p>
<p>But before we do so, lets look at a smaller example of human height data.</p>
<section id="the-histogram" class="level2 page-columns page-full" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="the-histogram"><span class="header-section-number">3.1</span> The histogram</h2>
<p>To summarize data, statisticians often use a graph which is called a <strong>histogram</strong>. In this section we will discuss all you have to know about histograms and how to use them.</p>
<section id="constructing-a-histogram" class="level3 page-columns page-full" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="constructing-a-histogram"><span class="header-section-number">3.1.1</span> Constructing a histogram</h3>
<div class="page-columns page-full"><p>Since real world examples in this exposition come from anthropometry, let us look at a sample of 100 observations from a set of real world data about human adults of age 18 and above, where the data record their height in cm.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> I have stored these values in an R object which I called <code>heights</code>. So in this discussion I refer to the 100 vaues shown below as <code>heights</code>.</p><div class="no-row-height column-margin column-container"><li id="fn4"><p><sup>4</sup>&nbsp;These data are collected from the internet. For details you can look at the source at http://wiki.stat.ucla.edu/socr/index.php/SOCR_Data_Dinov_020108_HeightsWeights</p></li></div></div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(JWL)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> socr_height_weight</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>Height <span class="ot">&lt;-</span> dat<span class="sc">$</span>Height<span class="sc">*</span><span class="fl">2.54</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>heights <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="at">x =</span> dat<span class="sc">$</span>Height, <span class="at">size =</span> <span class="dv">100</span>) <span class="co"># randomly select 100 values without replacement.</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>heights</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 171.5912 174.0172 175.5666 173.7980 172.0488 171.9966 168.0614 185.3618
  [9] 174.4489 174.2083 174.8307 171.6123 175.5515 169.8454 174.2598 177.0208
 [17] 176.0683 178.8391 168.3490 171.3392 176.3523 171.3722 173.0217 164.0692
 [25] 171.0165 180.5622 171.1445 177.4639 167.0146 175.9097 170.9656 173.5110
 [33] 166.4426 176.2078 169.4876 176.6579 179.6563 170.2477 167.9883 176.6037
 [41] 173.6044 167.8685 164.5033 161.3102 176.2323 184.1186 175.9741 178.7940
 [49] 162.6569 175.3654 175.5658 164.5769 167.4618 180.5760 176.4807 167.1875
 [57] 170.7098 179.8085 162.4880 182.7100 173.1352 175.5756 169.5662 166.9201
 [65] 176.7185 173.8010 177.2146 164.5343 173.0048 167.5625 175.7398 174.0607
 [73] 182.0625 169.7786 171.2853 172.5116 173.4802 171.7511 172.1317 172.3667
 [81] 172.1702 169.1945 169.0105 171.7650 173.7279 165.9003 175.6967 174.5598
 [89] 177.1643 175.0406 171.9614 173.3289 169.6971 172.8287 170.3538 175.8446
 [97] 169.3031 170.4622 179.2061 167.5248</code></pre>
</div>
</div>
<p>This is how R prints out the 100 height values. You already learned what the numbers in brackets on the left side mean. They are counters of observations. In total we have 100 values.</p>
<div class="page-columns page-full"><p>We start the construction of a histogram by choosing for the horizontal axes ranges of numerical values - in our case of the height data - which are called <em>bins</em> or <em>classes</em>. There is no fixed rule as to how to choose the size of these ranges. These ranges should neither be too fine, nor too coarse. While there are lists of mechanical rules, which you can for example find on Wikipedia<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>, it is usually best to use your domain knowledge and some experimentation to find out the bin size that works best for your data.</p><div class="no-row-height column-margin column-container"><li id="fn5"><p><sup>5</sup>&nbsp;See https://en.wikipedia.org/wiki/Histogram#Number_of_bins_and_width</p></li></div></div>
<p>For this example, assume we had chosen a bin size of 5 cm. When you study the list, you will find that the lowest value is at 160.12 cm while the highest value is at 185.16. This is already quite tedious to find out by eyeballing the numbers with the small number of values we have chosen for this example. It is impossible to do for really large data sets.</p>
<p>Now lets make a distribution table like this:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">Height-bin</th>
<th style="text-align: right;">Frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">160 - 165</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: right;">165 - 170</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="odd">
<td style="text-align: right;">170 - 175</td>
<td style="text-align: right;">39</td>
</tr>
<tr class="even">
<td style="text-align: right;">175 - 180</td>
<td style="text-align: right;">28</td>
</tr>
<tr class="odd">
<td style="text-align: right;">180 - 185</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: right;">185 - 190</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
<p>In the column Height-bin we have recorded the bins in steps of 5 and in the right column, Frequency, we have recorded the count of values that are in this bin.</p>
<p>When we make such a tabulation we have to agree on an endpoint convention. This is important, since when a height value would for instance be measured as exactly 165, in which bin should it be counted: 160-165 or 165-170? You, the constructor of the histogram, has to take this decision. Let us agree on the convention that when a value falls exactly at the endpoint of the bin, we put it in the next bin. In practice you will usually do a histogram by computer. The code of the computer program has to specify an endpoint convention, so the computer knows what to do when a value coincides with an endpoint.</p>
<p>On the Frequency axes you put the frequency scale: Counts of values. Then for each bin, you plot a bar, which has the width of the bin and the height of the frequency. Do this for all the bins you have tabulated and you are ready.</p>
<p>The histogram provides a certain aggregation of the data because it sorts the 100 data points into 6 bins, in our example. While loosing some local information on individual data points the global information conveyed by the summary gives us a pretty good idea of the overall pattern of variation on the human height data.</p>
<p>We can see, for instance, that the most frequent height is between 170 and 175 and that the variation is fairly symmetric around this bin. In the extremes this most frequent value can half or shrink even more, so there is quite some spread in the data.</p>
<p>If we had just plotted all individual data points, we would have got a picture like this.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">as.numeric</span>(heights), <span class="at">xlab =</span> <span class="st">"Observation"</span>, <span class="at">ylab =</span> <span class="st">"Height in cm"</span>, <span class="at">pch =</span> <span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="summarizing_and_communicating_lots_of_data_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>You will agree that as a summary of the data it is not particularly useful and not as informative as the histogram.</p>
<p>Histograms are such a common tool in statistics to explore the variation in one variable and the shape, how it is roughly distributed that every statistical software has functions to produce histograms.</p>
<p>In R, the language we use in this course, there is also such a function. The function name is called <code>hist()</code> and it takes the data as an argument. This is the second graphic function of R you encounter in this course after we played with the <code>barplot()</code>function in the last lecture.</p>
<p>To produce a histogram from the height data with R, we type, assuming that we have stored the 100 heights data we printed above in a variable called <code>heights</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(heights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="summarizing_and_communicating_lots_of_data_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Now you try
</div>
</div>
<div class="callout-body-container callout-body">
<p>Let us check your understanding of histograms by a little quiz now. The histogram below shows the distribution of the final score in a certain class.</p>
<ol type="a">
<li>Which block represents the people who scored between 60 and 80?</li>
<li>Ten percent scored between 20 and 40 about what percentage scored between 40 and 60?</li>
<li>About what percentage scored over 60?</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pictures/final_score.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Final Score</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="the-relative-frequency-scale-absolute-versus-relative-frequency" class="level3 page-columns page-full" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="the-relative-frequency-scale-absolute-versus-relative-frequency"><span class="header-section-number">3.1.2</span> The relative frequency scale: Absolute versus relative frequency</h3>
<p>Sometimes it might be useful, to choose a different scale for the y axes of your histogram. Instead of absolute frequencies (or counts) it might be useful to show relative frequencies, the proportion of occurrences in each bin. The type of scale you choose will depend on what kind of comparisons you want to emphasize about your data.</p>
<p>Assume you would want to draw your histogram such that on the y-axis you do not see the absolute counts of how many individuals in your data fell into a certain hight bin but you want to see instead these numbers as a percentage of the whole dataset.</p>
<p>This is sometimes convenient and in some cases more informative. This choice of a different scale is called the <strong>relative-frequency-scale</strong>. The construction of the histogram follows the same principles as we have already discussed but now we just quantify the counts in the bins differently as shares of all observations.</p>
<p>Let’s do the histogram for the heights data in a relative frequency scale. In our table, which we used to construct the histogram before we had in total 100 observations. A count of 7 is therefore 7 % or 0.07 in the relative frequency scale etc. Thus our table would now be:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">Height-bin</th>
<th style="text-align: right;">Frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">160 - 165</td>
<td style="text-align: right;">0.07</td>
</tr>
<tr class="even">
<td style="text-align: right;">165 - 170</td>
<td style="text-align: right;">0.20</td>
</tr>
<tr class="odd">
<td style="text-align: right;">170 - 175</td>
<td style="text-align: right;">0.39</td>
</tr>
<tr class="even">
<td style="text-align: right;">175 - 180</td>
<td style="text-align: right;">0.28</td>
</tr>
<tr class="odd">
<td style="text-align: right;">180 - 185</td>
<td style="text-align: right;">0.05</td>
</tr>
<tr class="even">
<td style="text-align: right;">185 - 190</td>
<td style="text-align: right;">0.01</td>
</tr>
</tbody>
</table>
<p>and the histogram in relative frequency scale would look like this:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>h<span class="ot">&lt;-</span><span class="fu">hist</span>(heights, <span class="at">plot=</span>F)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>h<span class="sc">$</span>counts <span class="ot">&lt;-</span> h<span class="sc">$</span>counts <span class="sc">/</span> <span class="fu">sum</span>(h<span class="sc">$</span>counts)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(h, <span class="at">freq=</span><span class="cn">TRUE</span>, <span class="at">ylab=</span><span class="st">"Relative Frequency"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">axis</span>(<span class="dv">2</span>, <span class="at">at =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.1</span>,<span class="fl">0.2</span>,<span class="fl">0.3</span>,<span class="fl">0.4</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.1</span>,<span class="fl">0.2</span>,<span class="fl">0.3</span>,<span class="fl">0.4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="summarizing_and_communicating_lots_of_data_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="page-columns page-full"><p>Unfortunately R has no standard argument to its <code>hist()</code>function to draw a histogram with a relative frequency scale. To produce a histogram like shown here we would need some more advanced coding than we know at the moment.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> I will come back to explain how to do a histogram with relative frequency scale in R as soon as we have learned the appropriate syntax to implement this.</p><div class="no-row-height column-margin column-container"><li id="fn6"><p><sup>6</sup>&nbsp;The <code>hist()</code> function in R has an argument, called <code>freq</code>. It can take the value <code>TRUE</code> or <code>FALSE</code>. If the argument is set to <code>FALSE</code> the histogram is shown such that the y axis has yet another scale, the so called density scale. This scale is chosen such that the total area of the histogram is 1.</p></li></div></div>
</section>
<section id="best-practices-for-histograms" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="best-practices-for-histograms"><span class="header-section-number">3.1.3</span> Best practices for histograms</h3>
<p>When you summarize lots of data by a histogram there are some things you should consider carefully. Let us go through the most important best practice principles for histograms.</p>
<section id="bin-size" class="level4" data-number="3.1.3.1">
<h4 data-number="3.1.3.1" class="anchored" data-anchor-id="bin-size"><span class="header-section-number">3.1.3.1</span> Bin size</h4>
<p>When doing exploratory data work it is usually a good idea not to look at a single histogram but at several histograms of the same data by changing the bin size. There is no clear rule about the optimal bin size. It often depends on context and field knowledge.</p>
<p>If the bins are to fine, then the data will be be very noisy and give no overview because they show too many individual points. On the other hand if the bins are too wide, they will not show you the overall variability in the data very well and you fail to get a good idea about the distribution.</p>
<p>Let us illustrate this point using our heights data.</p>
<p>In the first case we have chosen 100 bins, which is too fine. There is almost one bar for every single data point. In this way we have a lot of spurious peaks and throughs and can not see the variation pattern in the data very clearly</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(heights, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fu">min</span>(heights), <span class="fu">max</span>(heights), <span class="at">length.out =</span> <span class="dv">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="summarizing_and_communicating_lots_of_data_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now here we have the other extreme, lets assume we have only 3 bins. This would give us a pattern like this.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(heights, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fu">min</span>(heights), <span class="fu">max</span>(heights), <span class="at">length.out =</span> <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="summarizing_and_communicating_lots_of_data_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Here the histogram is too coarse and we do not see the variation pattern either.</p>
<p>The computer usually has a built in rule of thumb for the histogram which will work well in most of the cases. Still for individual datasets it is sometimes better to choose a different bin size that more adequately mirrors the variation in the data.</p>
</section>
<section id="choose-boundaries-that-can-be-clearly-interpreted" class="level4" data-number="3.1.3.2">
<h4 data-number="3.1.3.2" class="anchored" data-anchor-id="choose-boundaries-that-can-be-clearly-interpreted"><span class="header-section-number">3.1.3.2</span> Choose boundaries that can be clearly interpreted</h4>
<p>Tick marks and labels should fall on the bin boundaries. As in the examples discussed so far, they need not be there for every tick but it is enough if they are there between every few bars. Bin labels should also have not many significant digits, so they are easy to read. So bin sized which divide 10 and 20 evenly are easier to read than bin sizes that do not. So always take caution not to arbitrarily split bin sizes. Otherwise you can end up with off bin boundaries.</p>
<p>For example, if we just took the maximum and the minimum of the heights data and arbitrarily divided them into 7 bins, we would get the difficult to read bin boundaries</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="fu">min</span>(heights), <span class="fu">max</span>(heights), <span class="at">length.out =</span> <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 161.3102 165.3188 169.3274 173.3360 177.3446 181.3532 185.3618</code></pre>
</div>
</div>
<p>instead of the more easily readable boundaries</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">160</span>,<span class="dv">190</span>,<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 160 165 170 175 180 185 190</code></pre>
</div>
</div>
</section>
<section id="whats-the-difference-between-a-histogram-and-a-bar-chart" class="level4" data-number="3.1.3.3">
<h4 data-number="3.1.3.3" class="anchored" data-anchor-id="whats-the-difference-between-a-histogram-and-a-bar-chart"><span class="header-section-number">3.1.3.3</span> What’s the difference between a histogram and a bar chart?</h4>
<p>A histogram depicts the frequency distribution of a continuous, quantitative variable, such as height, weight, time, energy consumption etc. These are variables that can take on any value and these values can be ordered from smallest to highest.</p>
<p>When we have a categorical variable, like we encountered them in section 2, we need to use a bar chart. The bars of the bar chart typically will have a small gap between the bars, emphasizing the discrete nature of the variable. The categories in a bar chart usually have no natural ordering. As we discussed in section 2, we have even to be conscious how we display the categories to avoid suggesting an order that is in fact not there in the data.</p>
</section>
</section>
</section>
<section id="the-average-and-the-standard-deviation" class="level2 page-columns page-full" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="the-average-and-the-standard-deviation"><span class="header-section-number">3.2</span> The average and the standard deviation</h2>
<p>With a histogram we can summarize a large amount of data and get some insights about the variation in the data. Often we can summarize data much more drastically by just one number describing the center of the histogram and the spread around this center. When I write center an spread here, these are just ordinary words with no special technical meaning.</p>
<div class="page-columns page-full"><p>When we do statistics we need precise definitions and we will study and learn these definitions in this section. The <strong>average</strong> is often used to find the center. The <strong>standard</strong> deviation measures spread around the average. <a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn7"><p><sup>7</sup>&nbsp;When the distribution is not symmetric around the mean it is better to take other measures of center and spread. These alternative measures are called the <strong>median</strong>. The <strong>interquartile range</strong> is another alternative measure of spreads. We will learn the details about these measures later in the course.</p></li></div></div>
<p>Before we go into these definitions, let me show for a start two histograms, both have the same center, but the second one is more spread out, there are more observations farther away from the center.</p>
<div id="fig-example-hist" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ex-hist-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="pictures/example_histogram1.png" class="img-fluid figure-img" data-ref-parent="fig-example-hist"></p>
<figcaption class="figure-caption">(a) Histogram 1</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-ex-hist-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="pictures/example_histogram2.png" class="img-fluid figure-img" data-ref-parent="fig-example-hist"></p>
<figcaption class="figure-caption">(b) Histogram 2</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;3.1: Histogram 1 and Histogram 2 have the same center but Histogram 2 is more spread out</figcaption><p></p>
</figure>
</div>
<p>These distributions can be summarized by the center and the spread. But what about a situation like this?</p>
<div id="fig-ex-hist-bm" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="pictures/bimodal.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;3.2: A bimodal distribution</figcaption>
</figure>
</div>
<p>In some cases such distribution can occur naturally. Think, for example, about the distribution of the elevation data of surface area of the earth. Most of the surface area of the earth is taken by the sea floor at about three miles below the sea level or the continental planes around sea level. If we would report only the center an the spread of this histogram, plotted in the picture as the red and blue vertical lines, we would miss these peaks.</p>
<section id="the-average" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="the-average"><span class="header-section-number">3.2.1</span> The average</h3>
<p>Let us come back to the height data, we have analyzed in a histogram before as the context for which we study the concept of an average.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Average
</div>
</div>
<div class="callout-body-container callout-body">
<p>The average of a list of numbers is defined as their sum, divided by how many numbers their are in the list.</p>
</div>
</div>
<p>For example the average of the list <span class="math inline">\(L\)</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>L <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>would be computed as:</p>
<p><span class="math display">\[\begin{equation}
\frac{(9+1+2+2+0)}{5} = \frac{14}{5} = 2.8
\end{equation}\]</span></p>
<p>By now it will be no surprise for you that R provides a function for computing averages. This function is known by the alternative name for the average, called the mean.</p>
<p>Here is how you would compute the mean using R.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(L)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.8</code></pre>
</div>
</div>
<p>which is indeed what we should get as a result.</p>
<p>Let’s go back to the issue of human height data and take our data set of 100 observations of the height of adult humans. Let us recall our histogram and give it some nice title and a precise label for the x-axis:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(heights, <span class="at">xlab =</span> <span class="st">"Height in cm"</span>, <span class="at">main =</span> <span class="st">"Height of 18 year old humans"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="summarizing_and_communicating_lots_of_data_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The distribution looks symmetric. If we summarize these data by taking an average in one number we will capture the center of the distribution fairly well. Let us compute the average, using the mean function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>average_height <span class="ot">&lt;-</span> <span class="fu">mean</span>(heights)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>average_height</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 172.8044</code></pre>
</div>
</div>
<p>The average height in this dataset is about 172.8 cm. The average is a very powerful way of communicating data by compressing many observations into one single number, the mean.</p>
<p>This compression is, however, only achieved by loosing some information on individual differences. For example in our dataset the average height is 172.8 cm.</p>
<p>But there are about 6 % who are larger than 180 cm and there are also about 7 % who are smaller than 165 cm. With 100 individuals these are individuals who are beyond these thresholds. This diversity is hidden in the aggregation.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
How to compute percentages of observations that fulfill a condition.
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a good opportunity to show you a cool feature or trick in R how we could in one line compute such percentages. Assume we want to compute the percentage of individuals in our data who are larger than the mean of 172.8. How can we do this?</p>
<p>Logicals are a powerful data type to make such a computation. A logical is a special data type, similar to the data type numerical, used for representing numbers, or the data type character, representing strings. A logical can either be <code>TRUE</code> or <code>FALSE</code> and will be the output of an R operation testing a condition.</p>
<p>Say we have 10 numbers, given by</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we could ask R which entries of x are larger than 2 by typing</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  TRUE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
<p>The output is a vector of logicals where R compares each entry in <code>x</code>with 2 and if it is larger it returns <code>TRUE</code> and otherwise <code>FALSE</code> (this includes all entries which are exactly 2).</p>
<p>Note that, when you apply the function <code>mean()</code> to a vector of data of type logical R performs a computation by coercing <code>TRUE</code>to the number 1 and <code>FALSE</code> to the number 0. We will learn about the details of these R the coercion rules later in more detail. If you apply <code>mean()</code> to <code>x</code> you will get the proportion of values fulfilling a certain condition. So if you take the mean of</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  TRUE  TRUE FALSE FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
<p>R would first transfrom the vector</p>
<p><code>TRUE</code>, <code>TRUE</code>, <code>FALSE</code>, <code>FALSE</code>, <code>TRUE</code>, <code>FALSE</code>, <code>FALSE</code>, <code>TRUE</code>, <code>TRUE</code>, <code>TRUE</code></p>
<p>into a vector</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(x <span class="sc">&gt;</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 0 0 1 0 0 1 1 1</code></pre>
</div>
</div>
<p>When you take the mean <span class="math display">\[\begin{equation}
\frac{1+1+0+0+1+0+0+1+1+1}{10}
\end{equation}\]</span> you just get the proportion of 1, i.e.&nbsp;cases where the condition <span class="math inline">\(x &gt; 2\)</span> is <code>TRUE</code>, because the 0-es do not contribute to the value of the sum, only the 1-s.</p>
<p>This insight can be used to compute the percentage of values that fulfill a certain condition in R. Here the proportions of heights larger and smaller than the mean.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(heights <span class="sc">&gt;</span> <span class="fu">mean</span>(heights))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.52</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(heights <span class="sc">&lt;</span> <span class="fu">mean</span>(heights))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.48</code></pre>
</div>
</div>
<p>Here you see the symmetry of the distribution numerically. About 50 % are larger and also smaller than the mean.</p>
</div>
</div>
</section>
<section id="the-standard-deviation" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="the-standard-deviation"><span class="header-section-number">3.2.2</span> The standard deviation</h3>
<p>When summarizing and communicating lots of data, it is useful not only to report at which value the center of the distribution is. It is often helpful to also think about the way how the values spread around the average. The quantity which measures this spread is called the standard deviation. It can be interpreted as an average deviation.</p>
<p>Le us go back to our data on human height. There were 100 observations in our sample. The average height was 172.8 cm.</p>
<p>This average tells us that most of the humans measured in the sample had a height of around 1 m and 73 cm. But there were deviations from this average. Some humans were taller and others were smaller. We can ask how big these deviations are? In answering this question we need the concept of the standard deviation.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Standard deviation
</div>
</div>
<div class="callout-body-container callout-body">
<p>The standard deviation says how far away numbers on a list are from their average. Most entries on the list will usually be somewhat around one standard deviation from the average. Very few will be more than two or three standard deviations away.</p>
</div>
</div>
<p>In R you can compute the standard deviation by using the function <code>sd()</code>. So let us compute the standard deviation of our height data using the <code>sd()</code>function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(heights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.726364</code></pre>
</div>
</div>
<p>The standard deviation is at about 4.73 cm. That means that many humans differed from the average height by about 1, 2, 3, 4 or about 5 cm. Let us use R to compute the percent of observation that are within one standard deviation from the average.</p>
<p>Let us compute the percentage of observations, which are within 1 standard deviation from the mean height. Do you remember the trick with using logicals?</p>
<p>Let us compute the percentage of observations which are larger than the average height minus und standard deviation and smaller than the average height plus one standard deviation. The R symbol for and is <code>&amp;</code>. Let us use it to formulate the condition:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(heights <span class="sc">&gt;=</span> <span class="fu">mean</span>(heights) <span class="sc">-</span> <span class="fu">sd</span>(heights) <span class="sc">&amp;</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>     heights <span class="sc">&lt;=</span> <span class="fu">mean</span>(heights) <span class="sc">+</span> <span class="fu">sd</span>(heights))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.71</code></pre>
</div>
</div>
<p>In our case these are 71 % of all observations.</p>
<p>Sometimes it is convenient to subtract the mean from every observation and and express the units in terms of standard deviations. By construction this is a variable with mean 0 and standard deviation 1. This is called standardization or normalization. Let me show you how this works.</p>
<p>We transform our heights data to <span class="math display">\[\begin{equation*}
z_i = \frac{x_i - \mu}{\sigma}
\end{equation*}\]</span> and compute the mean of <span class="math inline">\(z_i\)</span> and its standard deviation. We can use R to do that:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> (heights <span class="sc">-</span> <span class="fu">mean</span>(heights))<span class="sc">/</span><span class="fu">sd</span>(heights)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.699057e-15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>Now you see that the mean is 0 and the standard deviation is 1. The mean in the R computation is not exactly 0. R says it is <code>2.699057e-15</code>. What does this mean? This is a way of writing 0.000000000000002699057 in a special notation. Do not worry for now how this notation works exactly. What you can see is that this is an very very small number, practically the same as 0. In R it is not exactly zero because of rounding errors of the computer. For practical purposed the value is as good as zero. This must be the case as a consequence of how we changed the units. The mathematically inclined among you might try to derive this fact more generally using the definition of the mean and the standard deviation.</p>
<p>Now if we ask the same question as before. Which proportions of <span class="math inline">\(z\)</span> are within -1 and + 1 standard deviation from the mean, we get</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(z <span class="sc">&gt;=</span> <span class="fu">mean</span>(z) <span class="sc">-</span> <span class="fu">sd</span>(z) <span class="sc">&amp;</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>     z <span class="sc">&lt;=</span> <span class="fu">mean</span>(z) <span class="sc">+</span> <span class="fu">sd</span>(z))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.71</code></pre>
</div>
</div>
<p>This is exactly the same value as we got before. Our transformation was just about changing the units in which our data are measured. This change of unit does not change the distribution. So no matter whether we work with <span class="math inline">\(x\)</span> the original heights in cm or with the <span class="math inline">\(z\)</span> the normalized data, the distributional properties do not change. In statistics if data are normalized in this way the normalized values are also often referred to as the <strong>z-score</strong>.</p>
</section>
<section id="computing-the-standard-deviation" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="computing-the-standard-deviation"><span class="header-section-number">3.2.3</span> Computing the standard deviation</h3>
<p>Usually we will compute the standard deviation using the computer and only in rare cases will we ever compute a standard deviation by hand. Still it is important that you understand how the computation works and what is actually been computed. Here is how.</p>
<p>Example 1: Find the standard deviation of the list 20, 10, 15, 15</p>
<p>Step 1: We first need to find the average, which is <span class="math display">\[\begin{equation}
\frac{20 + 10 + 15 + 15}{4} = 15
\end{equation}\]</span></p>
<p>Step 2: We next need to find the deviation from the average. In order to do so, we just subtract the average from each entry <span class="math display">\[\begin{eqnarray}
(20-15)&amp;=5\\
(10-15)&amp;=&amp;-5\\
(15-15)&amp;=&amp;0\\
(15-15)&amp;=&amp;0
\end{eqnarray}\]</span></p>
<p>Step 3: Now we have to square each one of these differences and take the square root, which is often called the root mean square</p>
<p><span class="math display">\[\begin{eqnarray}
sd&amp;=&amp;\sqrt{\frac{5^2 + (-5)^2 + 0^2 + 0^2}{4}} \\
&amp;=&amp; \sqrt{\frac{25 + 25 + 0 + 0}{4}} \\
&amp;=&amp; \sqrt{\frac{50}{4}}\\
&amp;=&amp; \sqrt{12.4}\\
&amp;\approx&amp; 3.5
\end{eqnarray}\]</span></p>
<p>The standard deviation has the same units as the data. For example, when we measure height in cm then at the squaring step the units change to <span class="math inline">\(cm^2\)</span> but the square root returns <span class="math inline">\(cm\)</span> again.</p>
</section>
<section id="the-r-implementation-of-sd" class="level3" data-number="3.2.4">
<h3 data-number="3.2.4" class="anchored" data-anchor-id="the-r-implementation-of-sd"><span class="header-section-number">3.2.4</span> The R implementation of sd()</h3>
<p>When you use the R function <code>sd()</code> to check the computation we did above</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(<span class="fu">c</span>(<span class="dv">5</span>,<span class="sc">-</span><span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.082483</code></pre>
</div>
</div>
<p>Should this not be roughly <span class="math inline">\(3.5\)</span>? Let’s check the computation from above directly again using R</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">sqrt</span>((<span class="dv">25</span><span class="sc">+</span><span class="dv">25</span><span class="sc">+</span><span class="dv">0</span><span class="sc">+</span><span class="dv">0</span>)<span class="sc">/</span><span class="dv">4</span>),<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.5</code></pre>
</div>
</div>
<p>What is going on here. Is there a bug in the R implementation of <code>sd()</code>? No, the reason for this is that the R implementation of <code>sd()</code>implements the function for the standard deviation is called the <em>sample standard deviation</em> and it has the formula. In contrast to the formula we discussed above, which is called the <em>population standard deviation</em> it divides by <span class="math inline">\((n-1)\)</span> - in our example by 3 - instead of by <span class="math inline">\(n\)</span> in our example 4. In the next lecture we we learn what the precise meaning of the terms sample and population is and what this means. Whenever we are interested in the standard deviation of the population we use the formula we have discussed. Whenever we compute the standard deviation of a sample we use the sample standard deviation. Don’t worry about this difference at this stage. For most practical purposes, especially when you have many observations this difference does not matter much.</p>
<p>But what do you do, when you want to have the exact value of the population standard deviation, as we wanted this before in the example, but R only provides the formula for the sample standard deviation? It is easy to transform one into the other using a little math. let me show you how to go from the formula for the sample standard deviation to the population standard deviation. Assume the data values are <span class="math inline">\(x_1, x_2, x_3\)</span> and <span class="math inline">\(x_4\)</span> and their mean or average is <span class="math inline">\(\mu\)</span>. Then the formula for <code>sd()</code>would compute: <span class="math display">\[\begin{equation*}
\sqrt{\frac{(x_1 - \mu)^2 + (x_2 - \mu)^2 + (x_3 - \mu)^2 + (x_4 - \mu)^2)}{3}}
\end{equation*}\]</span> Now, if we multiply this term by <span class="math inline">\(\sqrt{3/4}\)</span>, we get <span class="math display">\[\begin{equation*}
\sqrt{\frac{(x_1 - \mu)^2 + (x_2 - \mu)^2 + (x_3 - \mu)^2 + (x_4 - \mu)^2)}{3}}\sqrt{\frac{3}{4}}
\end{equation*}\]</span> which is the same as <span class="math display">\[\begin{equation*}
\sqrt{3 \frac{(x_1 - \mu)^2 + (x_2 - \mu)^2 + (x_3 - \mu)^2 + (x_4 - \mu)^2)}{3}\frac{1}{4}}
\end{equation*}\]</span> Now the 3 is cancelling out and we have <span class="math display">\[\begin{equation*}
\sqrt{\frac{(x_1 - \mu)^2 + (x_2 - \mu)^2 + (x_3 - \mu)^2 + (x_4 - \mu)^2)}{4}}
\end{equation*}\]</span> which is the population standard deviation. Those of you who learned the mathematics of powers in school will have no difficulties understanding this little mathematical argument. Those of you who did not learn this, don’t worry. This discussion is just to explain to you a point you need to be aware of when working with <code>sd()</code>. So if we multiply <code>sd()</code>by <span class="math inline">\(sqrt{(n-1)/n}\)</span> we will get the population standard deviation. Let’s check, using our example</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(<span class="fu">c</span>(<span class="dv">5</span>,<span class="sc">-</span><span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">0</span>))<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">3</span><span class="sc">/</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.535534</code></pre>
</div>
</div>
<p>and we get the same value as in the formula we used. Note that <code>sqrt()</code>is the R function for computing the square root.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Now you try
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Guess which of the following two lists has the larger standard deviation. Check your guess by computing the standard deviation for both lists.</li>
</ol>
<ol type="i">
<li>9,9,10,10,12</li>
<li>7,8,10,11,11,13</li>
</ol>
<ol start="2" type="1">
<li><p>Can the standard deviation ever be negative?</p></li>
<li><p>For a list of positive numbers can the standard deviation ever be larger than the average?</p></li>
</ol>
</div>
</div>
</section>
</section>
<section id="sec-moreR" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="sec-moreR"><span class="header-section-number">3.3</span> Bigger datasets and more R</h2>
<p>When we use the computer to summarize and communicate lots of data we need to get to know more of R. In particular we need to understand how to read data and select and manipulate variables. Let me lead you through some of the most basic concepts you need to know in order to do so. Finally we will apply our new skills to the hands on analysis of a real world anthropometric dataset from the DHS survey that help us to get a global picture about the nutritional situation for children and how this information could support us in setting policy priorities.</p>
<section id="vectors-and-indices" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="vectors-and-indices"><span class="header-section-number">3.3.1</span> Vectors and indices</h3>
<p>Say that for some reason we would be interested in the 50th observation in our data on human height. How would we tell R to select this observation from our data?</p>
<p>Individual elements can be accessed by using an <em>index</em> or a set of <em>indices</em>. The index is specified by using brackets <code>[]</code>. For example</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>heights[<span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 172.0488</code></pre>
</div>
</div>
<p>gives the 5th element of our heights data. You can go to the beginning of this chapter to verify that we have indeed captured this element. 5 is the index in this example. To capture the 50the element, we would type</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>heights[<span class="dv">50</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 175.3654</code></pre>
</div>
</div>
<p>A very important function in R is the <code>c()</code>function. <code>c</code> is short for concatenate and this is what the function does. It builds a vector putting several numbers together in one R object. In this way we can write down several indices at once and tell R for instance to read the 4th, the 40ies and the 67th element from our heights data like this</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>heights[<span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">40</span>,<span class="dv">67</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 173.7980 176.6037 177.2146</code></pre>
</div>
</div>
</section>
<section id="selecting-more-than-one-observation" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="selecting-more-than-one-observation"><span class="header-section-number">3.3.2</span> Selecting more than one observation</h3>
<p>Sometimes we need to retrieve consecutive numbers. For this case we need another function, the colon operator or <code>:</code>. It helps us to build sequences of conscutive numbers.</p>
<p>For example</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>heights[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 174.0172 175.5666 173.7980</code></pre>
</div>
</div>
<p>is the same as</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>heights[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 174.0172 175.5666 173.7980</code></pre>
</div>
</div>
<p>Say we wanted to know the average height and the standard deviation of the first 50 observations in our data we could tell R to compute this by</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(heights[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 173.0988</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(heights[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.99029</code></pre>
</div>
</div>
<p>Another very powerful and useful function we will need often in data analysis is the <code>lenght()</code>function of R. It gives us the number of elements in a vector. Let’s check this with <code>heights()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(heights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 100</code></pre>
</div>
</div>
<p>which gives us the answer to be expected.</p>
</section>
<section id="logical-subsetting-coercion-rules-and-recycling" class="level3" data-number="3.3.3">
<h3 data-number="3.3.3" class="anchored" data-anchor-id="logical-subsetting-coercion-rules-and-recycling"><span class="header-section-number">3.3.3</span> Logical subsetting, coercion rules and recycling</h3>
<p>As we already learned in the context of computing proportions of values fulfilling a certain condition by using logicals and the coercion rules of R before, we can do similar things by composing different functions.</p>
<p>Assume we want to know the number of observations with a height larger than 180 cm. This could be computed by typing</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(heights <span class="sc">&gt;</span> <span class="dv">180</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
</div>
<p>You already know how this works. In the parentheses is a comparison. In this comparison R checks for each entry in the vector <code>heights</code> whether it is larger than 180 or not. For each observation where this is the case the output is <code>TRUE</code> and otherwise <code>FALSE</code>.</p>
<p>But how can such a comparison work? After all heights is a vector with 100 entries and 180 is just one number. A vector can not be compared to a number. Here some feature of R comes into place which is called <em>recycling</em>. R makes <code>heights</code>and 180 similar by extending 180 to a vector with 100 of the same element 180 and then compare component by component resulting in a vector with 100 logicals (i.e.&nbsp;<code>TRUE</code> or <code>FALSE</code>).</p>
<p>When the vector of logicals is given to the <code>sum()</code>function another internal rule of R is applied, which is called <em>coercion</em>. In this case R transforms in the background automatically the <code>TRUE</code> values into 1 and the <code>FALSE</code>values into 0. As a result you will get the sum of all cases where the condition is fulfilled.</p>
<p>A related and also very useful function is the <code>which()</code>function. With this function you can find out the indices of the observations, fulfilling a condition</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(heights <span class="sc">&gt;</span> <span class="dv">180</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  8 26 46 54 60 73</code></pre>
</div>
</div>
<p>tells you that the elements 8 26 46 54 60 73 were larger than 180. And what were the values of these 6 observations? Now you know already. It is</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>heights[<span class="fu">which</span>(heights <span class="sc">&gt;</span> <span class="dv">180</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 185.3618 180.5622 184.1186 180.5760 182.7100 182.0625</code></pre>
</div>
</div>
</section>
<section id="data-frames" class="level3" data-number="3.3.4">
<h3 data-number="3.3.4" class="anchored" data-anchor-id="data-frames"><span class="header-section-number">3.3.4</span> Data Frames</h3>
<p>Data Frames are the next R workhorse when we deal with data. A data frame is a rectangular table of data where every row corresponds to one data point.</p>
<p>Instead of using just some data frame let us this time use a real world example of anthropometric data from the DHS. Anthropometric data can help a country to get a data driven picture on the nutritional status of its population. These data can help identify areas where policy action is needed.</p>
<section id="dhs-data-on-the-nutritional-status-of-children-under-5-years" class="level4" data-number="3.3.4.1">
<h4 data-number="3.3.4.1" class="anchored" data-anchor-id="dhs-data-on-the-nutritional-status-of-children-under-5-years"><span class="header-section-number">3.3.4.1</span> DHS data on the nutritional status of children under 5 years</h4>
<p>In the analysis we are going to produce a statistical table on the nutritional status of children under five years. The anthropometric data reveal information about a persons nutritional status. The nutritional status of children is observed to monitor and measure malnutrition. The nutritional data of children are included in the United Nations development goals indicators. They encompass children’s sex, age, height-length, and weight. The nutritional indicators are sex and age specific because boys and girls grow at different rates. Their growth rates are also age dependent.</p>
<p>Four indicators on nutritional status are collected in DHS surveys:</p>
<ol type="a">
<li><p><strong>Overweight</strong>: This indicates high weight for height and is a measure of excess weight. This results from an imbalance of energy consumed (too much) and energy expended (too little). Children with this condition have an increased risk of non-communicable diseases, such as high blood pressure and diabetes and is associated with increased risk of being obese and overweight in adulthood.</p></li>
<li><p><strong>Stunting</strong>: This is low height-for-age. It is a measure of growth faltering and may result from a deficient growth environment, recurrent infections, chronic diseases and other causes. It is associated with impaired brain development and reduced academic achievement in childhood and lower economic potential as an adult.</p></li>
<li><p><strong>Wasting</strong>: Is low weight-for-height and is a measure of acute weight loss. This may result from inadequate food intake or from illness or infection. With this condition children are more susceptible for disease and have a higher risk of death.</p></li>
<li><p><strong>Underweight</strong>: Is low weight-for-age and is a measure of weight relative to a child’s age. It reflects children who are stunted or wasted or both.</p></li>
</ol>
<p>The World Health Organisation (WHO) child growth standards provide a single international standard that describes the physiological growth for all children from birth to age 5. The measurements of individual children are compared to the WHO Child Growth Standards to assess each child’s growth. The WHO Growth Standards for children use a distribution that is expressed in units of standard deviations from the mean, also called z-scores. It is a distribution with a mean 0 and standard deviation 1. Within 1 standard deviation are about 67 % of all values, within 2 standard deviations it is 95 % and within 3 standard deviations 99.7%. Height for age, weight for height, and weight for age of children are expressed in these units.</p>
<p>Statistical cutoffs are used to measure malnutrition. If a child’s height for age is below minus two standard deviations from the mean (expressed in z-scores), the child is considered stunted. If it is below minus three standard deviations from the mean it is considered severely stunted. If the weight-for-height z-score is below minus 2 standard deviations from the mean the child is considered wasted, if it is below three standard deviations from the mean it is considered severely wasted. If the weight for height z-score is above two standard deviations from the mean the child is considered overweight, if three standard deviations above it is considered obese. If the weight for height z-score of a child is below two standard deviations from the mean it is considered underweight, if three, severely underweight.</p>
<p>The WHO uses the following prevalence thresholds to assess the problems of stunting and wasting in a population of children:</p>
<table class="table-striped table-hover table">
<caption>WHO Prevalence thresholds for height and weight</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Classification</th>
<th style="text-align: left;">stunting</th>
<th style="text-align: left;">wasting and overweight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">very high</td>
<td style="text-align: left;">30% or more</td>
<td style="text-align: left;">15 % or more</td>
</tr>
<tr class="even">
<td style="text-align: left;">high</td>
<td style="text-align: left;">20 - 29 %</td>
<td style="text-align: left;">10 - 14 %</td>
</tr>
<tr class="odd">
<td style="text-align: left;">medium</td>
<td style="text-align: left;">10 - 19 %</td>
<td style="text-align: left;">5 - 9 %</td>
</tr>
<tr class="even">
<td style="text-align: left;">low</td>
<td style="text-align: left;">2.5 - 9 %</td>
<td style="text-align: left;">2.5 - 4 %</td>
</tr>
<tr class="odd">
<td style="text-align: left;">very low</td>
<td style="text-align: left;">Less than 2.5 %</td>
<td style="text-align: left;">Less than 2.5 %</td>
</tr>
</tbody>
</table>
<p>Prevalence is the proportion of a population who have a specific characteristic in a given time period. In a survey prevalence is measured by the number of people in a sample who have the characteristic divided by all people in the sample.</p>
<p>Let us go now into the actual data and learn how to use the computer and R as a tool.</p>
</section>
<section id="sec-readingdata" class="level4" data-number="3.3.4.2">
<h4 data-number="3.3.4.2" class="anchored" data-anchor-id="sec-readingdata"><span class="header-section-number">3.3.4.2</span> Reading the DHS data using the JWL-package</h4>
<p>The data we use in these notes and in our course are usually real world data collected from a public source on the internet. Since we begin from scratch with explaining the concepts of statistics as well as of R, we develop your R knowledge step by step and explain only at the end of the course how to read data into R from various outside sources, from websites and in different file formats. While this is not difficult, it is tedious and perhaps unnecessarily confusing for a beginner.</p>
<p>We have therefore packed all datasets used in this course into a so called <code>R package</code>. R-packages are libraries, which add new functionalities to R, usually new functions, which you yourself or somebody else has written. Packages must be installed once and then loaded to be usable for your current R session. The package with the name <code>JWL</code> contains all datasets used in the course and it has been preinstalled by your learning facilitators. You only have to load the package, when you want to use data from it in your current R session.</p>
<p>The R function, loading a package is called <code>library()</code> and it takes the package name as an argument. We load the DHS data now from the JWL package. We first load the package to make the data available to R. For this you type at the console of at the input cell of your Jupyter Notebook</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(JWL)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now the data are available to you. But how do I know the names of the datasets? R contains a function <code>data()</code> where you can look up datasets that are bundeled in a package. For instance if you type</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="at">package =</span> <span class="st">"JWL"</span>)<span class="sc">$</span>results[ , <span class="st">"Item"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "advertising"                               
 [2] "age_specific_birth_statistics"             
 [3] "age_specific_fertility_statistics"         
 [4] "arthritis"                                 
 [5] "child_mortality_average_schooling_of_women"
 [6] "child_mortality_statistics"                
 [7] "children_nutrition_data"                   
 [8] "col_sal"                                   
 [9] "emissions"                                 
[10] "energy_consumption_per_capita"             
[11] "enrol_attend_dat"                          
[12] "expenditure_outcome_dat"                   
[13] "general_demographics"                      
[14] "height_men"                                
[15] "height_weight"                             
[16] "height_women"                              
[17] "infant_mortality_causes"                   
[18] "infant_mortality_data"                     
[19] "infant_mortality_statistics"               
[20] "life_expectancy"                           
[21] "life_expectancy_by_sex"                    
[22] "ncd_height"                                
[23] "ncd_weight"                                
[24] "pearson"                                   
[25] "population_statistics_by_age_and_sex"      
[26] "povdat_by_country"                         
[27] "poverty_vs_gdp"                            
[28] "rev_weather_data"                          
[29] "socr_height_weight"                        </code></pre>
</div>
</div>
<p>R shows you all the datasets that are in the <code>JWL</code> package. Don’t worry for the moment about the somewhat mysterious syntax of this R statement. Given your current knowledge of R you cannot fully understand it at this moment. So just accept it as a command whith which you can look up datasets in a package.</p>
<p>Our dataset from the DHS is called <code>cildren_nutrition_data</code>. Let’s store them in an object with a slightly simpler name, say <code>dhs_data</code>. How to store data in an R object, we have already learned in the previous lecture. You invent a name and assign the values to this name using the assignment operator <code>&lt;-</code>.</p>
<p>Let’s call the object in which we save our data <code>dhs_data</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>dhs_data <span class="ot">&lt;-</span> children_nutrition_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="inspecting-the-data" class="level4" data-number="3.3.4.3">
<h4 data-number="3.3.4.3" class="anchored" data-anchor-id="inspecting-the-data"><span class="header-section-number">3.3.4.3</span> Inspecting the data</h4>
<p>A useful function to inspect a data object like the one we have just created is the <code>dim()</code> function. It will tell us how many rows and columns our dataframe actually has</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(dhs_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2559   17</code></pre>
</div>
</div>
<p>This means that our data have 2559 rows and 17 columns. Quite a bit larger than the <code>heights</code> dataset. Here we really need a computer to analyze the infortion contained in these data.</p>
<p>Another useful function to inspect data is the <code>heads()</code>function. It displays by default the first 6 rows of the dataframe</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dhs_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          wt age_in_months    sex type_of_residence   region wealth_index
16  1.049502       24 - 35 female             rural region 2       middle
27  1.049502       24 - 35 female             rural region 2       poorer
36  1.049502       36 - 48 female             rural region 2      poorest
94  1.049502        9 - 11   male             rural region 2       poorer
106 1.049502       36 - 48 female             rural region 2       middle
113 1.049502       24 - 35   male             rural region 2       poorer
    nt_ch_sev_stunt nt_ch_stunt nt_ch_haz nt_ch_sev_wast nt_ch_wast
16            FALSE       FALSE     -0.73          FALSE      FALSE
27            FALSE        TRUE     -2.23          FALSE      FALSE
36            FALSE        TRUE     -2.10          FALSE      FALSE
94            FALSE       FALSE     -0.64          FALSE      FALSE
106           FALSE       FALSE     -0.38          FALSE      FALSE
113           FALSE        TRUE     -2.08          FALSE      FALSE
    nt_ch_ovwt_ht nt_ch_whz nt_ch_sev_underwt nt_ch_underwt nt_ch_ovwt_age
16          FALSE      0.29              TRUE         FALSE          FALSE
27          FALSE     -0.42              TRUE         FALSE          FALSE
36          FALSE      0.37              TRUE         FALSE          FALSE
94          FALSE     -0.77              TRUE         FALSE          FALSE
106         FALSE     -0.54              TRUE         FALSE          FALSE
113         FALSE     -1.02              TRUE         FALSE          FALSE
    nt_ch_waz
16      -0.13
27      -1.59
36      -1.01
94      -0.92
106     -0.56
113     -1.84</code></pre>
</div>
</div>
<p>Since there are 17 variables not all of them can be displayed on a single page-width. R stacks the information in blocks. We see that some columns are numerical, some are characters and some are logicals. The variable names give already some clues about what they mean. For the exact meaning we would need some form of documentation.</p>
</section>
<section id="analyzing-particular-variables-and-subsets-of-data" class="level4" data-number="3.3.4.4">
<h4 data-number="3.3.4.4" class="anchored" data-anchor-id="analyzing-particular-variables-and-subsets-of-data"><span class="header-section-number">3.3.4.4</span> Analyzing particular variables and subsets of data</h4>
<p>Dollar signs <code>$</code> are used to adress individual columns. For example, assume we would like to count the number of boys (i.e.&nbsp;sex == male) in our sample we could use this together with R’s coercion rules by coding</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(dhs_data<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">"male"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1256</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(dhs_data<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">"female"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1303</code></pre>
</div>
</div>
<p>Observe a few things here: Operationally we have applied the tricks we have learned about using logicals to count up cases for which a condition is true. The variable <code>sex</code> in our data is coded by strings of chracters. We therefore need to put these strings into <code>" "</code> quotation marks in the comparison. Note also that the identidy sign in R is <code>==</code>. The symbol <code>=</code> in R is an assignment operator, which we can only use to assign values to arguments in a function.</p>
<p>Indices in a dataframe are pairs specifying row and column numbers. For example</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>dhs_data[<span class="dv">4</span>,<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] male
Levels: male female</code></pre>
</div>
</div>
<p>is the data point in the dataframe which is at row 4 and column 3. In this case it is a string of characters.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remember
</div>
</div>
<div class="callout-body-container callout-body">
<p>For any subset of a data frame <code>d</code>, we can extract whatever rows and columns we want using the format</p>
<p><code>d[the rows we want, the columns we want]</code></p>
</div>
</div>
<p>Sometimes dataframes do not have column names. Still we can apply functions to the vector of a column using indices. For example we could compute the mean of the variable <code>nt_ch_waz</code>as</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(dhs_data[ ,<span class="dv">17</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.7392497</code></pre>
</div>
</div>
<p>Note the expression <code>[,17]</code>. Since there is a 17 in the second position, we are talking about column 17. And since the first position, before the comma, is empty, no rows are specified — so <em>all</em> rows are included. That boils down to: all of column 18.</p>
<p>A powerful feature of R is that we can extract data from a dataframe using the same logic as we used when extracting data from a vector.</p>
<p>For example the follwoing code extracts variables 1, 3 and 5 and prints the first four values of them</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>dhs_data[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         wt    sex   region
16 1.049502 female region 2
27 1.049502 female region 2
36 1.049502 female region 2
94 1.049502   male region 2</code></pre>
</div>
</div>
<p>Note that in a dataframe all columns must have the same length. But as in our dataset, every variable can contain a different data type, like numbers, characters or logicals.</p>
<p>Now let us analyze the prevalence of children in our dataset that are wasted. Before we do that let us explain that the data contain a variable, which is called <code>wt</code>. This is short for weight. It means that each row is not counted as one observation but is weighted. The sum of the weights</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(dhs_data<span class="sc">$</span>wt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2494.102</code></pre>
</div>
</div>
<p>would then give us the total number of children in the sample. Let us not go into the details of where these weights are coming from and why they are needed at this stage. The variable that encodes stunting is <code>nt_ch_stunt</code> and the variable that encodes wasting is <code>nt_ch_wast</code>.</p>
<p>Now let us do the computation using the rules we have learned so far:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(dhs_data<span class="sc">$</span>nt_ch_stunt<span class="sc">*</span>dhs_data<span class="sc">$</span>wt)<span class="sc">/</span><span class="fu">sum</span>(dhs_data<span class="sc">$</span>wt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3589812</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(dhs_data<span class="sc">$</span>nt_ch_wast<span class="sc">*</span>dhs_data<span class="sc">$</span>wt)<span class="sc">/</span><span class="fu">sum</span>(dhs_data<span class="sc">$</span>wt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1002921</code></pre>
</div>
</div>
<p>The proportion of stunted children in our sample is 35.9 % and the proportion of wasted children is 10 %. Thus according to the WHO classification the prevalence in stunting is very high and the prevalence in wasting is high.</p>
<p>We could use our new knowldge to answer other questions. Assume we would want to find out which of our regions has the highest proportion in stunting?</p>
<p>First, let us find which rows refer to region 1, region 2 etc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>r1 <span class="ot">&lt;-</span> <span class="fu">which</span>(dhs_data<span class="sc">$</span>region <span class="sc">==</span> <span class="st">"region 1"</span>)</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>r2 <span class="ot">&lt;-</span> <span class="fu">which</span>(dhs_data<span class="sc">$</span>region <span class="sc">==</span> <span class="st">"region 2"</span>)</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>r3 <span class="ot">&lt;-</span> <span class="fu">which</span>(dhs_data<span class="sc">$</span>region <span class="sc">==</span> <span class="st">"region 3"</span>)</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>r4 <span class="ot">&lt;-</span> <span class="fu">which</span>(dhs_data<span class="sc">$</span>region <span class="sc">==</span> <span class="st">"region 4"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now with these row indices we can compute the proportions on the relevant subset of the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>data_r1 <span class="ot">&lt;-</span> dhs_data[r1, ]</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>data_r2 <span class="ot">&lt;-</span> dhs_data[r2, ]</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>data_r3 <span class="ot">&lt;-</span> dhs_data[r3, ]</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>data_r4 <span class="ot">&lt;-</span> dhs_data[r4, ]</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(data_r1<span class="sc">$</span>nt_ch_stunt<span class="sc">*</span>data_r1<span class="sc">$</span>wt)<span class="sc">/</span><span class="fu">sum</span>(data_r1<span class="sc">$</span>wt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3367742</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(data_r2<span class="sc">$</span>nt_ch_stunt<span class="sc">*</span>data_r2<span class="sc">$</span>wt)<span class="sc">/</span><span class="fu">sum</span>(data_r2<span class="sc">$</span>wt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4078512</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(data_r3<span class="sc">$</span>nt_ch_stunt<span class="sc">*</span>data_r3<span class="sc">$</span>wt)<span class="sc">/</span><span class="fu">sum</span>(data_r3<span class="sc">$</span>wt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2998199</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(data_r4<span class="sc">$</span>nt_ch_stunt<span class="sc">*</span>data_r4<span class="sc">$</span>wt)<span class="sc">/</span><span class="fu">sum</span>(data_r4<span class="sc">$</span>wt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.393195</code></pre>
</div>
</div>
<p>So we see that region 2 has the highest prevalence in stunting.</p>
<p>Often we want to extract data that fulfill more than just one condition. For instance when we want to filter the values of a variable that fall in a particular interval we need the values that are larger or equal to the lower bound of this interval and lower or equal to the upper bound of the interval.</p>
</section>
<section id="combining-several-conditions" class="level4" data-number="3.3.4.5">
<h4 data-number="3.3.4.5" class="anchored" data-anchor-id="combining-several-conditions"><span class="header-section-number">3.3.4.5</span> Combining several conditions</h4>
<p>R allows us to combine conditions by logical operators. Assume we want to know the proportion of children in our data that are wasted and stunted. In this case both conditions need to be fulfilled. This would be coded in the following way:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>((dhs_data<span class="sc">$</span>nt_ch_stunt <span class="sc">&amp;</span> dhs_data<span class="sc">$</span>nt_ch_wast)<span class="sc">*</span>dhs_data<span class="sc">$</span>wt)<span class="sc">/</span><span class="fu">sum</span>(dhs_data<span class="sc">$</span>wt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.03264431</code></pre>
</div>
</div>
<p>Let me explain. The condition that a child is both stunted and wasted means that the stunting variable evaluates to <code>TRUE</code> and the wasting variable evaluates to <code>TRUE</code>. If this is the case <code>(dhs_data$nt_ch_stunt &amp; dhs_data$nt_ch_wast)</code> is <code>TRUE</code>. If one of these variables evaluates to <code>FALSE</code> then <code>(dhs_data$nt_ch_stunt &amp; dhs_data$nt_ch_wast)</code> is <code>FALSE</code>.</p>
<p>We can do this with other logical operators. We can ask for example what is the proportion of children who are wasted or stunted. The operator here is <code>|</code> and <code>(dhs_data$nt_ch_stunt | dhs_data$nt_ch_wast)</code> evaluates to <code>TRUE</code> if the first condition is <code>TRUE</code> or if the second condition is <code>TRUE</code> or if both are <code>TRUE</code>. Let’s do the computation:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>((dhs_data<span class="sc">$</span>nt_ch_stunt <span class="sc">|</span> dhs_data<span class="sc">$</span>nt_ch_wast)<span class="sc">*</span>dhs_data<span class="sc">$</span>wt)<span class="sc">/</span><span class="fu">sum</span>(dhs_data<span class="sc">$</span>wt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4266291</code></pre>
</div>
</div>
<p>a proportion that is very high.</p>
</section>
</section>
</section>
<section id="summary" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="summary"><span class="header-section-number">3.4</span> Summary</h2>
<p>In this chapter you have learned how to summarize and communicate lost of data. As an application context we have chosen measures of height and weight, or anthropometric data.</p>
<ol type="1">
<li><p>You have learned how to summarize data graphically by a histogram, how to construct a histogram and how to display the histogram with different scales: With absolute and relative frequencies.</p></li>
<li><p>You have learned to plot histograms in R and learned about things to care about when doing histograms, such as the choice of the bin size and choosing the boundaries of bins.</p></li>
<li><p>You have learned to summarize data by the mean and the standard deviation. You have learned what these numbers mean and how to compute them by hand and, when you have lots of data, by R.</p></li>
<li><p>You have learned new concepts in R that helped us to analyze a large dataset from the demographic and health survey by computing proportions of children suffering from certain physical conditions. In particular the new R concepts you learned were</p>
<ol type="a">
<li>Reading data from a file</li>
<li>Using indices to extract particular values from a vector.</li>
<li>Selecting more than one observation.</li>
<li>Logical subsetting, coercion and recycling rules of R</li>
<li>Data frames and how to work with them.</li>
</ol></li>
</ol>
</section>
<section id="exercises" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="exercises"><span class="header-section-number">3.5</span> Exercises</h2>
<section id="exercises-1" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="exercises-1"><span class="header-section-number">3.5.1</span> Exercises:</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 1: Histogram of monthly wages
</div>
</div>
<div class="callout-body-container callout-body">
<p>A histogram of monthly wages for part-time employees is shown below (relative frequencies are marked in parenthesis). Nobody earned more than $1000 a month. The block over the class interval from 200 to 300 is missing. How tall must it be?</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pictures/wages.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Wages</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 2: Which histogram is right?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Three people plot histograms for the weights of subjects in a study, using the relative frequency scale. Only one is right. Which one and why?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo = false</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(JWL)</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> height_weight</span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> dat[dat<span class="sc">$</span>state <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> dat<span class="sc">$</span>sex <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> dat<span class="sc">$</span>age <span class="sc">&gt;</span> <span class="dv">18</span>, ]</span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>hist_inf <span class="ot">&lt;-</span> <span class="fu">hist</span>(data<span class="sc">$</span>height, <span class="at">plot =</span> <span class="cn">FALSE</span>)         <span class="co"># Store output of hist function</span></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>hist_inf<span class="sc">$</span>density <span class="ot">&lt;-</span> hist_inf<span class="sc">$</span>counts <span class="sc">/</span>    <span class="co"># Compute density values</span></span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>(hist_inf<span class="sc">$</span>counts) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="at">file=</span><span class="st">"pictures/hight_version1.png"</span>)</span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hist_inf, <span class="at">freq =</span> <span class="cn">FALSE</span>, <span class="at">xlab =</span> <span class="st">" "</span>, <span class="at">ylab =</span> <span class="st">" "</span>, <span class="at">main =</span> <span class="st">" "</span>)</span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-17"><a href="#cb104-17" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="at">file=</span><span class="st">"pictures/hight_version2.png"</span>)</span>
<span id="cb104-18"><a href="#cb104-18" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hist_inf, <span class="at">freq =</span> <span class="cn">FALSE</span>, <span class="at">xlab =</span> <span class="st">"hight (cm) "</span>, <span class="at">ylab =</span> <span class="st">"Percent per 5 cm "</span>, <span class="at">main =</span> <span class="st">" "</span>)</span>
<span id="cb104-19"><a href="#cb104-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-20"><a href="#cb104-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-21"><a href="#cb104-21" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="at">file=</span><span class="st">"pictures/hight_version3.png"</span>)</span>
<span id="cb104-22"><a href="#cb104-22" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hist_inf, <span class="at">freq =</span> <span class="cn">FALSE</span>, <span class="at">xlab =</span> <span class="st">"hight (cm) "</span>, <span class="at">ylab =</span> <span class="st">"5 cm per percent"</span>, <span class="at">main =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="fig-height_hist" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-hight-hist-version1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="pictures/hight_version1.png" class="img-fluid figure-img" data-ref-parent="fig-height_hist"></p>
<figcaption class="figure-caption">(a) Version 1</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-hight-hist-version2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="pictures/hight_version2.png" class="img-fluid figure-img" data-ref-parent="fig-height_hist"></p>
<figcaption class="figure-caption">(b) Version 2</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-hight-hist-version3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="pictures/hight_version3.png" class="img-fluid figure-img" data-ref-parent="fig-height_hist"></p>
<figcaption class="figure-caption">(c) Version 3</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;3.3: Three versions of a hight histogram of males over age 18</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 3: Different scales in a histogram
</div>
</div>
<div class="callout-body-container callout-body">
<p>An investigator draws a histogram for some height data, using the metric system. She is working in centimeters (cm). She wants to draw the histogram in a so called density scale, i.e.&nbsp;in a scale that the area of all the bars sum to 1. The vertical axes shows relative frequency and the top of the vertical axes is 10 percent per cm. Now she wants to convert to millimeter (mm). There are 10 millimeter to the centimeter. On the horizontal axis, she has to change 175 cm to ? mm, 200 cam to ? mm. On the vertical axis she has to change 10 percent per cm to ? percent per mm, and 5 percent per cm to ? percent per mm.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 4: Find the average
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="a">
<li><p>The number 3 and 5 are marked by crosses on the horizontal line below. Find the average of these two numbers and mark it by an arrow.</p>
<p><img src="pictures/average_a.png" class="img-fluid"></p></li>
<li><p>Repeat (a) for the list 3,5,5</p>
<p><img src="pictures/average_b.png" class="img-fluid"></p></li>
<li><p>Two numbers are shown below by crosses on a horizontal axis. Draw an arrow pointing to their average.</p>
<p><img src="pictures/average_c.png" class="img-fluid"></p></li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 5: Questions about averages
</div>
</div>
<div class="callout-body-container callout-body">
<p>A list has 10 entries. Each entry is either 1, 2 or 3. What must the list be of the average is 1? if the average is 3? Can the average be 4?</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 6: Comparing averages without computation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Which of the following lists has a bigger average? Or are they the same? try to answer without doing arithmetic.</p>
<ol type="i">
<li>10, 7, 8, 3, 5, 9 (ii) 10, 7, 8, 3, 5, 9, 11</li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 7: Adding data and the change of averages
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>Ten people in a room have an average height of 1.69 m. An 11th person is 1.96 enters the room. Find the average height of all 11 people.</p></li>
<li><p>Twenty-one people in a room have an average height of 1.68. A 22nd person who is 1.96 enters the room. Find the average height of all 22 people.</p></li>
<li><p>Twenty-one people in a room have a height of 1.68. A 22nd person enters the room. How tall would he have to be to raise the average height by 1 inch.</p></li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 8: True or False ?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Diastolic blood pressure is considered a better indicator of heart trouble than systolic pressure. The figure below shows age-specific average diastolic blood pressure for men age 20 and over in a health survey from the US (HANES5 (2003-04)). True or false: The data show that as men age, their diastolic blood pressure increases until age 45 or so. and then decreases. If false, how do you explain the pattern in the graph? (Blood pressure is measured in “mm” that is millimeter of mercury)</p>
<p><img src="pictures/blood_pressure.png" class="img-fluid"></p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 9: Can you explain this?
</div>
</div>
<div class="callout-body-container callout-body">
<p>Average hourly earnings in the US are computed each month by the Bureau fo Labor statistics using payroll data from commercial establishments. The Bureau figures the total wages paid out to non-supervisory personnel, and divides by the total hours worked. During recessions, average hourly earnings typically go up. When the recession ends, average hourly earnings often start going down. How can this be?</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 10: Working with standard deviations
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>socr_height_weight</code> about the height and weight of 18 year old humans, we had used in the lecture before the average height in inches was about 173 cm and the standard deviation was about 5 cm.</p>
<ol type="i">
<li>One individual was 188 cm. He was above average by how many standard deviations?</li>
<li>Another individual was 174.66 cm. She was above average by how many standard deviations?</li>
<li>A third individual was 1.5 standard deviations below the average height. He was how many cm?</li>
<li>If an individual was within 2.25 standard deviations of average height, the shortest height for this individual would be how many cm? The highest height would be how many cm?</li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 11: Match the height
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="a">
<li>Here are the heights of 4 individuals. 150 cm, 130 cm, 180 cm, 172 cm. Match the heights with the description. A description may be used twice.</li>
</ol>
<p>unusually short, about average, unusually tall</p>
<ol start="2" type="a">
<li>About what percentage of individuals in the data had heights between 170.2 and 173.2 ? Between 165.5 and 179.2?</li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 12: Recognizing the spread of lists
</div>
</div>
<div class="callout-body-container callout-body">
<p>Each of the following lists has an average of 50. For which one is the spread of the numbers around the average biggest? Smallest?</p>
<ol type="i">
<li><pre><code>0, 20, 40, 50, 60, 80, 100</code></pre></li>
<li>0, 48, 49, 50, 51, 52, 100</li>
<li>0,1,2,50,98, 99, 100</li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 13: Guess the standard deviation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Each of the following lists has an average of 50. For each one, guess whether the standard deviation is around 1, 2, or 10. (This does not require any arithmetic.)</p>
<ol type="a">
<li>49, 51, 49, 51, 49, 51, 49, 51, 49, 51</li>
<li>48, 52, 48, 52, 48, 52, 48, 52, 48, 52</li>
<li>48, 51, 49, 52, 47, 52, 46, 51, 53, 51</li>
<li>54, 49, 46, 49, 51, 53, 50, 50, 49, 49</li>
<li>60, 36, 31, 50, 48, 50, 54, 56, 62, 53</li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 14: Stylized histograms, average and standard deviation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Below are three sketches of three stylized histograms (we call them “sketches” because they display a schematic shape of a hypothetical histogram. This is why these sketches do not look like real histograms.) Match the sketch with the description. Some descriptions will be left over. Give your reasoning in each case. The symbol <span class="math inline">\(\approx\)</span> is the mathematical notation for <em>approximately</em>.</p>
<ol type="i">
<li>ave <span class="math inline">\(\approx\)</span> 3.5, sd <span class="math inline">\(\approx\)</span> 1 (iv) ave <span class="math inline">\(\approx\)</span> 2.5, sd <span class="math inline">\(\approx\)</span> 1</li>
<li>ave <span class="math inline">\(\approx\)</span> 3.5, sd <span class="math inline">\(\approx\)</span> 0.5 (v) ave <span class="math inline">\(\approx\)</span> 2.5, sd <span class="math inline">\(\approx\)</span> 0.5</li>
<li>ave <span class="math inline">\(\approx\)</span> 3.4, sd <span class="math inline">\(\approx\)</span> 2 (vi) ave <span class="math inline">\(\approx\)</span> 4.5, sd <span class="math inline">\(\approx\)</span> 0.5</li>
</ol>
<div id="fig-histograms" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-hist_ex_1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="pictures/hist_ex_1.png" class="img-fluid figure-img" data-ref-parent="fig-histograms"></p>
<figcaption class="figure-caption">(a) Histogram 1</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-hist_ex_2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="pictures/hist_ex_2.png" class="img-fluid figure-img" data-ref-parent="fig-histograms"></p>
<figcaption class="figure-caption">(b) Histogram 2</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 33.3%;justify-content: center;">
<div id="fig-hist_ex_3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="pictures/hist_ex_3.png" class="img-fluid figure-img" data-ref-parent="fig-histograms"></p>
<figcaption class="figure-caption">(c) Histogram 3</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;3.4: Three stylized histograms</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 15: Estimating the size of average and standard deviation
</div>
</div>
<div class="callout-body-container callout-body">
<p>One investigator takes a sample of 100 men age 18 - 24 in a certain town. Another one takes a sample of 1000 such men.</p>
<ol type="a">
<li><p>Which investigator will get a bigger average for the heights of the men in his sample? Or should the average be about the same?</p></li>
<li><p>Which investigator will get a bigger standard deviation for the heights of the men in his sample? or should the standard deviation be about the same for both investigators?</p></li>
<li><p>Which investigator is likely to get the tallest of the sample men? Or are the chances about the same for both investigators?</p></li>
<li><p>Which investigator is likely to get the shortest of the sample men? Or are the chances about the same for both investigators?</p></li>
</ol>
</div>
</div>
</section>
<section id="exercises-r" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="exercises-r"><span class="header-section-number">3.5.2</span> Exercises R</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 15: A histogram of the Nile river flow data
</div>
</div>
<div class="callout-body-container callout-body">
<p>Base R comes bundled with certain datasets which are available to R when you start it. One of these data are flow measurements of the river Nile at Aswan in Egypt. This dataset is called <code>Nile</code>.</p>
<ol type="a">
<li><p>Use the R help function to learn more about these data. Describe in words the meaning of the datapoints.</p></li>
<li><p>Plot a histogram of the Nile river flow data.</p></li>
<li><p>Change the Main title of the histogram to “Histogram of Nile river flow data at Aswan Egypt” and change the x axes label to “Annual flow is recorded are 100 millions of cubic meters”. Hint: If you don’t know how to go about this either use ?hist - the R help function - to find out. Alternatively you might try a search engine like google of bing and ask something like “changing title and labels in base R histogram”.</p></li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 16: Analyze the full height dataset
</div>
</div>
<div class="callout-body-container callout-body">
<p>Load the <code>JWL</code> package of datasets and store the variable <code>socr_height_weight</code> in a variable called <code>dat</code>. Use R’s help function to learn what the data are.</p>
<ol type="1">
<li>The data show heights in inches and weights in pounds. Transform both variables to metric data before you continue. Note that 1 inch is 2.54 cm and 1 pound is 0.4535924 kg.</li>
<li>Plot a histogram of the heights in cm. Plot a histogram of the weight in cm.</li>
<li>Compute the mean and the standard deviation of both height and weight.</li>
<li>Compute the percentage of observations between plus 1 and minus 1 standard deviations from the mean.</li>
<li>Compute the percentage of observations between plus and minus 2 standard deviations from the mean. Do the same with three standard deviations.</li>
</ol>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 17: Energy consumption per capita accross countries in the world
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Load the dataset <code>energy_consumption_per_capita</code> from the JWL package and use the R help function to learn what this dataset describes.</li>
<li>Select the energy consumption in the year 2018 and plot a histogram of these data. What do you see?</li>
<li>How many countries consume more than 50.000 kilowatt-hours-per person per year?</li>
<li>Which countries fulfill this condition?</li>
</ol>
</div>
</div>
</section>
<section id="exercise-project" class="level3" data-number="3.5.3">
<h3 data-number="3.5.3" class="anchored" data-anchor-id="exercise-project"><span class="header-section-number">3.5.3</span> Exercise Project:</h3>
<p>To be added.</p>


</section>
</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./categorical_data_and_proportions.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Categorical Data and Proportions</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./from_limited_data_to_populations.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">From limited data to populations</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>