<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Statistics - 2&nbsp; Categorical Data and Proportions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./summarizing_and_communicating_lots_of_data.html" rel="next">
<link href="./introduction.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./categorical_data_and_proportions.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Categorical Data and Proportions</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Statistics</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title"><strong>Introduction</strong></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./categorical_data_and_proportions.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Categorical Data and Proportions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summarizing_and_communicating_lots_of_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Summarizing and communicating lots of data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./from_limited_data_to_populations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">From limited data to populations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./what_causes_what.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">What causes what?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modelling_relationships_using_regression_part_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Modelling relationships: Points, Lines and Scatterplots</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modelling_relationships_using_regression_part_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Modelling relationship: Prediction using regression</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./how_sure_can_we_be.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">How sure can we be about what is going on: Estimates and intervals</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Probability: Quantifying uncertainty and variablility</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probability_and_statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Putting probability and statistics together</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./answering_questions_and_claiming_discoveries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Answering questions and claiming discoveries</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#communicating-counts-and-proportions" id="toc-communicating-counts-and-proportions" class="nav-link active" data-scroll-target="#communicating-counts-and-proportions"><span class="header-section-number">2.1</span> Communicating Counts and Proportions</a></li>
  <li><a href="#a-first-acquaintance-with-r-visualizing-infant-mortality-rates" id="toc-a-first-acquaintance-with-r-visualizing-infant-mortality-rates" class="nav-link" data-scroll-target="#a-first-acquaintance-with-r-visualizing-infant-mortality-rates"><span class="header-section-number">2.2</span> A first acquaintance with R: Visualizing infant mortality rates</a>
  <ul class="collapse">
  <li><a href="#starting-an-quitting-r" id="toc-starting-an-quitting-r" class="nav-link" data-scroll-target="#starting-an-quitting-r"><span class="header-section-number">2.2.1</span> Starting an quitting R</a></li>
  <li><a href="#first-steps" id="toc-first-steps" class="nav-link" data-scroll-target="#first-steps"><span class="header-section-number">2.2.2</span> First steps</a></li>
  <li><a href="#storing-and-reusing-results" id="toc-storing-and-reusing-results" class="nav-link" data-scroll-target="#storing-and-reusing-results"><span class="header-section-number">2.2.3</span> Storing and reusing results</a></li>
  </ul></li>
  <li><a href="#using-r-via-the-jupyter-notebook" id="toc-using-r-via-the-jupyter-notebook" class="nav-link" data-scroll-target="#using-r-via-the-jupyter-notebook"><span class="header-section-number">2.3</span> Using R via the Jupyter Notebook</a>
  <ul class="collapse">
  <li><a href="#cells" id="toc-cells" class="nav-link" data-scroll-target="#cells"><span class="header-section-number">2.3.1</span> Cells</a></li>
  <li><a href="#a-first-data-visualization" id="toc-a-first-data-visualization" class="nav-link" data-scroll-target="#a-first-data-visualization"><span class="header-section-number">2.3.2</span> A first data visualization</a></li>
  </ul></li>
  <li><a href="#categorical-variables-causes-of-infant-mortality" id="toc-categorical-variables-causes-of-infant-mortality" class="nav-link" data-scroll-target="#categorical-variables-causes-of-infant-mortality"><span class="header-section-number">2.4</span> Categorical variables: Causes of infant mortality</a></li>
  <li><a href="#compairing-pairs-of-proportions" id="toc-compairing-pairs-of-proportions" class="nav-link" data-scroll-target="#compairing-pairs-of-proportions"><span class="header-section-number">2.5</span> Compairing pairs of proportions</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="header-section-number">2.6</span> Exercises</a>
  <ul class="collapse">
  <li><a href="#exercises-1" id="toc-exercises-1" class="nav-link" data-scroll-target="#exercises-1"><span class="header-section-number">2.6.1</span> Exercises</a></li>
  <li><a href="#exercises-r" id="toc-exercises-r" class="nav-link" data-scroll-target="#exercises-r"><span class="header-section-number">2.6.2</span> Exercises R</a></li>
  <li><a href="#project-people-count.-unit-1" id="toc-project-people-count.-unit-1" class="nav-link" data-scroll-target="#project-people-count.-unit-1"><span class="header-section-number">2.6.3</span> Project People Count. Unit 1</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Categorical Data and Proportions</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Overview
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>In this chapter we will learn how to analyze and communicate binary variables. Binary variables express answers to yes-no questions. When we summarize many such answers we can express them as proportions or percentages.</p></li>
<li><p>We will discuss these concepts within the examples of infant-mortality. This topic is not only interesting because it provides you a very important real world case where we work with counts and proportions of binary variables. It is also a great story of progress and positive global developments, where the data show you how much we have achieved together to better the life of children and infants.</p></li>
<li><p>You will learn about important aspects when you communicate such data such as framing, choosing appropriate and truthful visualizations and translate numbers in a way that promotes understanding.</p></li>
<li><p>You will also make your first steps in R, a computer language that we will use throughout the course and where you are going to build your skills step by step. Here you will already do your first visualization applying all the principles taught in this section.</p></li>
<li><p>When a variable can take on not only two but more values we speak of categorical variables and we discuss and generalize the principles we learn about the display and communication of binary data to the case of categorical data.</p></li>
<li><p>You will learn about the important notions of relative and absolute risks and what an odds ratio is. By the end of this section you will have learned some important principles of data visualization and communication that will be relevant and important also in other lessons.</p></li>
</ol>
</div>
</div>
<p>The death of a child is a tragedy to its family. The numbers of such events across the globe add up to millions. Max Roser, in an article on the website “Our world in Data” <span class="citation" data-cites="Ros">(<a href="references.html#ref-Ros" role="doc-biblioref">Roser 2019</a>)</span>, reports that from 56 million people who died for example in the year 2017, 5.4 millions were children under the age of 5. This is a number of enormous scale that never makes the headlines.</p>
<p>In his article Roser <span class="citation" data-cites="Ros">(<a href="references.html#ref-Ros" role="doc-biblioref">Roser 2019</a>)</span> puts this scale into perspective. He writes:</p>
<p>“…<em>The suffering and dying of children remains immense, yet these daily tragedies continue without receiving the attention this injustice deserves. A comparison of the tragedy of child deaths with those tragedies that do receive public attention puts it in perspective. A large jumbo jet can carry up to 620 passengers. The number of child deaths is that of 24 jumbo jet crashes, with only children on board, every single day. Single events – such as plane crashes – always make the headlines. Daily tragedies – even the worst ones like the deaths of thousands of children – never make the headlines.</em></p>
<p>In pre-industrial societies infant- and child-mortality were uniformly and cruelly high. They were a universal and frequent experience for families all over the world.</p>
<div class="page-columns page-full"><p>Such tragic events are today counted as well as reported and compiled in so called mortality statistics, usually by national health authorities and civil registration and statistics systems. These data are then again collected and globally reported by the United Nation World Health Organisation.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;If you have internet access you can look at the organisation’s website https://www.who.int/data/data-collection-tools/who-mortality-database</p></li></div></div>
<p>Mortality statistics distinguish between infant- and child-mortality. If a child dies within the first year of his life, this is classified and counted as an infant death and the statistics is referred to as infant-mortality statistics. If a child dies before its fifth year this is classified as child-mortality.</p>
<p>Mortality statistics are reported in different formats. Often the concept of a <em>mortality-rate</em> is used in such reports. These are usually mortality rates standardized to 1000 life births. To compute an infant mortality rate in a given year in a given geographic area one would, for instance, need to know how many babies were born alive in a given period in a given area and how many babies who were born alive died before their first birthday during the same period. The number of deaths is the divided by the number of births. This rate is then multiplied by 1000, so that the rate reflects the number of infant deaths per 1000 life births in a standardized manner. This is just a reporting convention. We also could multiply by 10.000 of 100.000 depending on the level of comparison that is required. Reporting mortality statistics as mortality rates has the advantage that it communicates the risk as an expected frequency. Instead of percentages or probabilities it conveys directly what it means, for example, for 1000 births.</p>
<p>The production and reporting of mortality statistics is a modern phenomenon. In many countries there are now statistical registry systems that record infant-deaths in legally regulated processes. But this is not the case all over the world. Poorer countries find it hard to have such processes in place. Still for these countries, where no registry data are available, the United Nations Health Organisation conduct high quality surveys that allow a fairly precise estimate of infant mortality rates. We will learn later in the course how you can draw conclusions from a survey to the whole population with a certain confidence. Today using either registry data of surveys we know a lot more about infant mortality based on a rich amount of data.</p>
<p>Historically these statistics can only be based on estimation and proxies of different and varied sources. In a scientific publication Anthony Volk and Jeremy Atkinson made an attempt to report mortality rates of infants and children in the past, collecting data from a wide range of geographic locations and cultures reaching far back in history <span class="citation" data-cites="VolAtk2013">(<a href="references.html#ref-VolAtk2013" role="doc-biblioref">Antony and Jeremy 2013</a>)</span>.</p>
<p>The authors find that in the entire sample about 27 % of children died in their first year of life and 46 % died before they reached adulthood. These numbers are surprisingly similar across regions and cultures: Every forth newborn child died in the first year of life, every second child during its early childhood. These high mortality rates are a major cause of the slow population growth of past centuries before the onset of the industrial revolution at around 1800.</p>
<div class="page-columns page-full"><p>Let us have a look at the data which we have collected and compiled from gapminder and the website our world in data.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> When we do this we only get data for a small group of countries.</p><div class="no-row-height column-margin column-container"><li id="fn2"><p><sup>2</sup>&nbsp;The files are at https://www.gapminder.org/documentation/documentation/gapdata002.xlsx and https://ourworldindata.org/grapher/infant-mortality/infant-mortality.csv. From the file name extensions you can see that the first file is an Excel sheet whereas the second file is a comma separated text file. Both file formats can be read by a computer. We will learn soon how to do this. For the moment let this data work be conducted in the background and just look at some numbers from the file I have compiled from these sources.</p></li></div></div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load our project  data library and the tidyverse</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(JWL)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># read data from data folder. The data are a csv version of the excel file from gapminder</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># sheet data</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>infant_mortality <span class="ot">&lt;-</span> infant_mortality_data</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># make table for the year 1860 and throw away all countries where there are no observations</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># and select the variables Country, Continent, Mortality</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> infant_mortality[infant_mortality<span class="sc">$</span>Year <span class="sc">==</span> <span class="dv">1860</span>, ]</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>rate_1860 <span class="ot">&lt;-</span> dat[ , <span class="fu">c</span>(<span class="st">"Country"</span>, <span class="st">"Continent"</span>, <span class="st">"Mortality"</span>)] <span class="sc">%&gt;%</span> <span class="fu">na.omit</span>()</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># make a table</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(rate_1860, <span class="at">digits =</span> <span class="dv">4</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="tbl-infant-mortality-1860" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;2.1: Infant mortality in some European countries in 1860</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Country</th>
<th style="text-align: left;">Continent</th>
<th style="text-align: right;">Mortality</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Austria</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.237</td>
</tr>
<tr class="even">
<td style="text-align: left;">Belgium</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.139</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Denmark</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.136</td>
</tr>
<tr class="even">
<td style="text-align: left;">France</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.150</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Germany</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.260</td>
</tr>
<tr class="even">
<td style="text-align: left;">Norway</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.102</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Spain</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.174</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sweden</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.124</td>
</tr>
</tbody>
</table>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># write a csv file of the table to the project table folder for further use by Seitwerk</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(rate_1860, <span class="at">file =</span> <span class="st">"tables/table_2_1_infant_mortality_1860.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The table shows infant mortality in the year 1860 as percent in decimal notation. So 0.124, for example, means 12.4 %. This is the percentage of infant deaths in Sweden in 1860. It is better than the historical numbers reported by <span class="citation" data-cites="VolAtk2013">(<a href="references.html#ref-VolAtk2013" role="doc-biblioref">Antony and Jeremy 2013</a>)</span> but still fairly high. Others at that time bigger countries with a much more heterogeneous population like Germany and Austria were pretty much at where the rates had always been in the past. The countries for which we have data from 1860 are all in Europe. Some of the bigger countries by this time had begun to register and report infant deaths in a mortality statistics.</p>
<p>Before we deal with the information conveyed by these data, let us take the opportunity to discuss some terminology and technical terms that we will always use when we deal with tabular data like the ones shown in <a href="#tbl-infant-mortality-1860">Table&nbsp;<span>2.1</span></a>.</p>
<div class="page-columns page-full"><p>The columns of the table have names. In our case these names are: Country, Continent and Mortality. These names are called our <strong>variables</strong>. In the specific example shown here we have data that record whether an event has happened or not, in our case the death of an infant in his first year of life in a specific country during a specific year. Variables that can take only two values, are called <strong>binary data</strong>. Sets of binary data can be summarized by the number of times and the percentage<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> of cases in which an event has occurred.</p><div class="no-row-height column-margin column-container"><li id="fn3"><p><sup>3</sup>&nbsp;Remember from school mathematics that a percentage is a number or ratio expressed as a fraction of 100. It is often denoted by the percentage sign %. A percentage is a dimensionless number. It has no unit of measurement. For example 45 % is the fraction <span class="math inline">\(\frac{45}{100}\)</span> or 0.45. Percentages are often used to express a proportionate part of the total. Thus when we see in the table that the mortality rate in Germany in the year 1860 is 0.260 this is expressed in percent as 26 %.</p></li></div></div>
<div class="page-columns page-full"><p>Each row in the table is a <strong>record</strong> or sometimes also called an <strong>observation</strong>. Our table shown here has eight records. For doing statistics, especially when using the computer, it is often useful to display data tables such that each variable is a column and each record is a row.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn4"><p><sup>4</sup>&nbsp;Such a format is not always the reader friendliest to humans. Thus data on the web are often organized differently. For example the Gapminder data show the Years as columns and countries as rows. While easier to read such a table for us, for working with the computer this deviation from the format variable as column and observation as row, often creates problems. We will come back to this seemingly minor but in fact quite important point over and over again. Hadley Wickham <span class="citation" data-cites="JSSv059i10">(<a href="references.html#ref-JSSv059i10" role="doc-biblioref">Wickham 2014</a>)</span>, who has contributed a lot to R and the R programming language which we will use in this course has popularized the term “tidy” for the table format where every column is a variable and every row is an observation.</p></li></div></div>
<p>In this chapter we will use counts and proportions as the leading example to discuss the basic presentation of statistics and data. We will learn about alternative ways to display data. You will learn how design choices for the display of data help or prevent engagement and readability for your respective audience. You will also learn the first steps in R and how to use the computer to analyze and communicate data.</p>
<section id="communicating-counts-and-proportions" class="level2 page-columns page-full" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="communicating-counts-and-proportions"><span class="header-section-number">2.1</span> Communicating Counts and Proportions</h2>
<p>Let us follow the history of infant mortality around the globe. When we looked at the year 1860 rates of infant mortality were very high, not much better than it had been all the centuries before industrialization has set in in Europe.</p>
<p>But then about 100 years later we already see a significant reduction in the Western countries, with rates reduced still much further until now in the most affluent countries. Let us look at the country group for which we had data in 1860 already, again today in 2020, before we go to the global picture. We will use this example to discuss some important aspects of communication counts and proportions.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the country group used in the historical 1860 data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>rate_2020 <span class="ot">&lt;-</span> infant_mortality[infant_mortality<span class="sc">$</span>Country <span class="sc">%in%</span> rate_1860<span class="sc">$</span>Country <span class="sc">&amp;</span> infant_mortality<span class="sc">$</span>Year <span class="sc">==</span> <span class="dv">2020</span>, <span class="fu">c</span>(<span class="st">"Country"</span>, <span class="st">"Continent"</span>, <span class="st">"Mortality"</span>)]</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># display the table and write text file of table</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(rate_2020, <span class="at">digits =</span> <span class="dv">4</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="tbl-infant-mortality-2020" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;2.2: Infant mortality in some European countries in 2020.</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Country</th>
<th style="text-align: left;">Continent</th>
<th style="text-align: right;">Mortality</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Austria</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.0030</td>
</tr>
<tr class="even">
<td style="text-align: left;">Belgium</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.0034</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Denmark</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.0031</td>
</tr>
<tr class="even">
<td style="text-align: left;">France</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.0034</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Germany</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.0031</td>
</tr>
<tr class="even">
<td style="text-align: left;">Norway</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.0018</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Spain</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.0027</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sweden</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.0021</td>
</tr>
</tbody>
</table>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(rate_2020, <span class="at">file =</span> <span class="st">"tables/table_2_2_infant_mortality_2020.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This is a spectacular improvement for this group of countries. By 2020 we have much more data, covering more regions and we will follow the global story later. But let us stick for the moment with this group of European Countries, which we followed over a time span of 160 year.</p>
<p>Within a bit more than a century the mortality rate has been reduced from 30 % to below 0.3 %. This amounts to a reduction by a factor of about 100. Isn’t this a stunning achievement?</p>
<div class="page-columns page-full"><p>In a recent book <span class="citation" data-cites="Smil2020">(<a href="references.html#ref-Smil2020" role="doc-biblioref">Smil 2020</a>)</span>, the Canadian researcher Vaclav Smil has pointed out that such low rates are impossible without the combination of a number of critical conditions, such as good healthcare in general, appropriate prenatal, perinatal and neonatal<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> care, proper maternal and infant nutrition, adequate sanitary living conditions as well as access to social support for disadvantages families. All of these factors require relevant government and private spending and on infrastructures that can be universally used and accessed. Infant mortality is thus a very powerful indicator of quality of life in a country.</p><div class="no-row-height column-margin column-container"><li id="fn5"><p><sup>5</sup>&nbsp;prenatal is a word rooted in ancient Latin and means before birth. Perinatal means around the time of birth and neonatal means the first month after birth of a child.</p></li></div></div>
<p>When data, such as counts and proportions are reported in a table we should make careful considerations how the data are precisely presented.</p>
<p>For instance in the table about infant mortality in some European countries in 1860, we could have reported the same information by presenting survival rates instead of mortality rates. Such a choice in reporting is generally known as <strong>framing</strong>.</p>
<p>Framing can have effects on the impact of communication. Depending on how you frame the communication of data, the same information might affect and engage your audience differently. The same table with survival rates instead of mortality rates would the look like this.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>srate_1860 <span class="ot">&lt;-</span> rate_1860</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>srate_1860<span class="sc">$</span>Survival <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> rate_1860<span class="sc">$</span>Mortality</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># table for 1860 survival rates</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>srate_1860 <span class="ot">&lt;-</span> <span class="fu">with</span>(srate_1860, srate_1860[ , <span class="fu">c</span>(<span class="st">"Country"</span>, <span class="st">"Continent"</span>, <span class="st">"Survival"</span>)])</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(srate_1860, <span class="at">digits =</span> <span class="dv">4</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="tbl-infant-survivial-rate-1860" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;2.3: Infant survival rates in some European countries in 1860</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Country</th>
<th style="text-align: left;">Continent</th>
<th style="text-align: right;">Survival</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Austria</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.763</td>
</tr>
<tr class="even">
<td style="text-align: left;">Belgium</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.861</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Denmark</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.864</td>
</tr>
<tr class="even">
<td style="text-align: left;">France</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.850</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Germany</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.740</td>
</tr>
<tr class="even">
<td style="text-align: left;">Norway</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Spain</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.826</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sweden</td>
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">0.876</td>
</tr>
</tbody>
</table>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(srate_1860, <span class="at">file =</span> <span class="st">"tables/table_2_3_infant_survival_1860.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Take for instance the data for Germany 1860. If we had reported a survival rate of 74 % it might sound to many better than if we had reported the equivalent information of a mortality rate of 26 %. So whenever you report counts or proportions be mindful of framing effects.</p>
<p>Risk impression can often be made more clear if we report expected frequencies as well<br>
as percentages. In this way the risk can be imagined as an actual crowd of people. For example we could visualize the infant mortality rate in Germany by creating a picture of the mortality rate, the actual number of cases per 1000 life births. If there are relatively few cases, as in 2020 Germany, this arbitrary normalisation leads to an artificial number such as 3.1 deaths per 1000 life births. Of course this is an artifact of the normalisation because there is nothing as an event with 0.1 deaths. If we had normalized to 10000 this would amount to 31 in 10000 which sounds more like an actual count. So for the visualization we take an infant mortality rate as infant deaths per 1000 life births to be 3.</p>
<p>Such a visualization could then look for example like this:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library(extrafont)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(emojifont)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>my_waffle <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">rows =</span> <span class="dv">5</span>, <span class="at">use_glyph =</span> <span class="st">'square'</span>, <span class="at">glyph_size =</span> <span class="dv">6</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">title =</span> <span class="st">'Waffle chart'</span>) {</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  len <span class="ot">&lt;-</span> <span class="fu">sum</span>(x)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  waffles <span class="ot">&lt;-</span> <span class="fu">seq</span>(len) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  nms <span class="ot">&lt;-</span> <span class="cf">if</span>(<span class="fu">is.null</span>(<span class="fu">names</span>(x))) <span class="fu">seq_along</span>(x) <span class="cf">else</span> <span class="fu">names</span>(x)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">xvals =</span> waffles <span class="sc">%/%</span> rows,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>                   <span class="at">yvals =</span> <span class="dv">1</span> <span class="sc">-</span> (waffles <span class="sc">%%</span> rows),</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>                   <span class="at">fill =</span> <span class="fu">factor</span>(<span class="fu">rep</span>(nms, <span class="at">times =</span> x)))</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(xvals, yvals, <span class="at">color =</span> fill)) <span class="sc">+</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="at">label =</span> <span class="fu">fontawesome</span>(<span class="fu">paste</span>(<span class="st">'fa'</span>, use_glyph, <span class="at">sep =</span> <span class="st">'-'</span>)), </span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>              <span class="at">family =</span> <span class="st">'fontawesome-webfont'</span>, <span class="at">size =</span> glyph_size, <span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_equal</span>(<span class="at">expand =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lims</span>(<span class="at">x  =</span> <span class="fu">c</span>(<span class="fu">min</span>(df<span class="sc">$</span>xvals) <span class="sc">-</span> <span class="dv">1</span>, <span class="fu">max</span>(df<span class="sc">$</span>xvals) <span class="sc">+</span> <span class="dv">1</span>),</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">y  =</span> <span class="fu">c</span>(<span class="fu">min</span>(df<span class="sc">$</span>yvals) <span class="sc">-</span> <span class="dv">1</span>, <span class="fu">max</span>(df<span class="sc">$</span>yvals) <span class="sc">+</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_void</span>(<span class="at">base_size =</span> <span class="dv">16</span>) <span class="sc">+</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> title, <span class="at">color =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(),</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>          <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>)) </span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>} </span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a><span class="fu">my_waffle</span>(<span class="fu">c</span>(<span class="st">"Death"</span> <span class="ot">=</span> <span class="dv">260</span>, <span class="st">"Survived"</span> <span class="ot">=</span> <span class="dv">740</span>), <span class="at">rows =</span> <span class="dv">20</span>, <span class="at">use_glyph =</span> <span class="st">"child"</span>, <span class="at">glyph_size =</span> <span class="dv">4</span>, <span class="at">title =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="categorical_data_and_proportions_files/figure-html/infant-mortality-isotype-1860-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">In 1860 in Germany among 1000 newborns 260 infants died in the first year of their life.</figcaption>
</figure>
</div>
</div>
</div>
<p>Here you visualize the numbers as differently colored crowds. There are 20 rows with 50 people symbols each. This multiplies to a crowd of 1000 people. It makes the magnitude of the mortality rate (as well as the survival rate) tangible. The share of infant death per 1000 life births in Germany in 1860 becomes now more tangible than reporting just a percentage in a table.</p>
<p>When you plot the same graph for the data of 2020 the enormous improvement that took place within a time span of one and a half centuries in Germany become perhaps more obvious than just looking at the rates alone. The same kind of visualization for the 2020 data would then look like this</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_waffle</span>(<span class="fu">c</span>(<span class="st">"Death"</span> <span class="ot">=</span> <span class="dv">3</span>, <span class="st">"Survived"</span> <span class="ot">=</span> <span class="dv">997</span>), <span class="at">rows =</span> <span class="dv">20</span>, <span class="at">use_glyph =</span> <span class="st">"child"</span>, <span class="at">glyph_size =</span> <span class="dv">4</span>, <span class="at">title =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="categorical_data_and_proportions_files/figure-html/infant-mortality-isotype-2020-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">In 2020 in Germany among 1000 newborns 3 infants died in the first year of their life.</figcaption>
</figure>
</div>
</div>
</div>
<p>From this perspective the improvement in infant mortality rates in Germany are truly spectacular.</p>
<p>Still even at the low mortality rate this can mean a huge amount of individual tragedies. In 2020 Germany had 760.378 births. 0.31 % of this amounts to 2357 individual tragedies. Even if this rate could be brought down further, say to 0.28 % which sounds like a tiny improvement, it would mean 228 infant lives that could be saved.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Be mindful of framing
</div>
</div>
<div class="callout-body-container callout-body">
<p>A standard we should strive for when reporting data is providing impartial information. For this we should think carefully about our framing and should perhaps provide both positive and negative frames.</p>
</div>
</div>
<p>But even if we achieve this, we should consider other things, like the ordering of the rows. Let us discuss this aspect in the next session together with your first steps in R.</p>
</section>
<section id="a-first-acquaintance-with-r-visualizing-infant-mortality-rates" class="level2 page-columns page-full" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="a-first-acquaintance-with-r-visualizing-infant-mortality-rates"><span class="header-section-number">2.2</span> A first acquaintance with R: Visualizing infant mortality rates</h2>
<p>While a table might be the medium of choice for displaying data it is often more powerful to convey information visually. The example of how imagining actual crowds might give us sometimes a more tangible picture of the same information, was one illustration of this.</p>
<p>Today when we visualize data as one important tool of data exploration, the tool of choice is a computer and an appropriate language that enables us to tell the computer what to do.</p>
<p>For us in this course this will be the R language and now we start to learn the first steps in this language.</p>
<section id="starting-an-quitting-r" class="level3 page-columns page-full" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="starting-an-quitting-r"><span class="header-section-number">2.2.1</span> Starting an quitting R</h3>
<div class="page-columns page-full"><p>We assume that the computer you work with has a recent version of R installed. R will work with the most common operating systems such as Windows, OSX or Linux.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn6"><p><sup>6</sup>&nbsp;Installing R yourself is not complicated. To install R yourself you need a computer where you have the privileges to install software and you need an internet connection. You get the newest version of R at the website https://cran.r-project.org/. A screenshot of the website is here <img src="pictures/cran-website-as-of-2022-09.png" class="img-fluid" alt="cran-website"></p></li></div></div>
<div class="page-columns page-full"><p>We will use R in two ways: First from the R command line and then also by working with Jupyter Notebooks.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn7"><p><sup>7</sup>&nbsp;Another very powerful and popular program to work with R and R code is RStudio, which you can find here https://www.rstudio.com/. RStudio is a so called IDE, an integrated development environment. If you have access to a computer with internet connection and the permissions to install software yourself, feel free to experiment also with this tool. The basic version is free of charge. Again you need a computer where you have the privileges to install software and you need an internet connection.</p></li></div></div>
<p>The notebooks will not only allow to write R code and send this code to R for execution. Notebooks also allows you to store commands, to comment them and make them available as files for later use. This is especially useful, once you work on longer and more complicated tasks. It is then essential that you can reproduce what you did in the past days, that you can write easily readable comments and that you can collaborate in a team, where you can share your work with others. This circle of collaborators includes your future and past self.</p>
<p>Let us start the <strong>R command line</strong> or the <strong>R-console</strong>, as it is called, introducing the use of R via the notebooks a bit later.</p>
<p>You start R by either typing <code>R</code> into the terminal or by clicking the R icon on your computer. The R console shows a prompt, a symbol that looks like this <code>&gt;</code>. When you see the prompt in the R console, R is ready to receive commands.</p>
<p>To end your R session write <code>quit()</code> at the prompt <code>&gt;</code> of the console. Congratulations. Now that you can start and quit R we are ready to go.</p>
</section>
<section id="first-steps" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="first-steps"><span class="header-section-number">2.2.2</span> First steps</h3>
<p>Here is an easy command you can send to R. Just try to type <code>1 + 1</code> at the prompt</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>Sure enough, R gives you the result of the addition, which is <code>2</code>. But what is <code>[1]</code>? This is just a row label. If there were more outputs to your command, then they would be labelled [2], [3], [4], and more. We will go into this aspect of R’s output display later in more detail.</p>
<p>So R can do all the usual computations. For instance if you knew that in Germany in 1860 there were 270 infant death per 1000 life birth you could compute the mortality rate in a decimal format by dividing the counts by 1000, because the convention is to report mortality as cases per 1000 life briths. The R command for division is <code>/</code>. So by typing</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="dv">270</span><span class="sc">/</span><span class="dv">1000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.27</code></pre>
</div>
</div>
<p>you will get the mortality rate <code>0.27</code> or 27 %.</p>
<p>You can do all the usual arithmetic operations, like with a calculator in R. For instance subtraction</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3-2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>Or multiplication</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span><span class="sc">*</span><span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 100</code></pre>
</div>
</div>
<p>You can raise a number to the power of another, like</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
<p>and of course you can combine all of these operations:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">1</span><span class="sc">+</span><span class="dv">3</span>)<span class="sc">^</span><span class="dv">2</span> <span class="sc">-</span> <span class="dv">5</span><span class="sc">*</span><span class="dv">4</span> <span class="sc">+</span> <span class="dv">12</span><span class="sc">^</span><span class="dv">3</span> <span class="sc">-</span> (<span class="dv">13</span><span class="sc">/</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1717.5</code></pre>
</div>
</div>
<p>The comma is represented in R as a dot <code>.</code>. So the above output reads <code>1717</code>and one half or <code>0.5</code>.</p>
<p>R needs a complete command to be able to execute it, when the return key is pressed. Lets see what happens, if a command is incomplete, like for instance:</p>
<p><code>5*</code></p>
<p>In this case R will show the expression <code>5*</code> followed by a <code>+</code> instead of showing a new prompt. This means that the expression is incomplete. When R shows <code>+</code> after entering a command instead of the output and a new prompt, it means that it expects more input. If we complete the expression, the expression can be evaluated and a new prompt is shown in the console.</p>
<p>If you type a command that R does not understand, you will be returned an error message. Errors are usually printed in red, and it instinctively might create a feeling of alarm. Don’t worry if you see an error message. It just is a way the computer tells you that he does not understand what you want him to do.</p>
<p>For instance, if you type <code>5%3</code> you will get an error message like this</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>%<span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:1:2: unexpected input
1: 5%3
     ^</code></pre>
</div>
</div>
<p>Sometimes it is obvious why a mistake occurred. In this case, that R just does not know what to do with the symbol <code>%</code>. It has no meaning in this context. Sometimes it is not so obvious what the error message actually means and what you might do about it.</p>
<p>A useful strategy in this case is to type the error message into a search engine and see what you can find. The chance is very high that others encountered the same problem before you and got helpful advice how to fix it from other users on the internet. One site, which is particularly helpful for all kinds of questions related to R and R programming is https://stackoverflow.com/. Try it at the next opportunity.</p>
<p>With this knowledge we can already do a first example, by continuing our discussion on infant mortality data we started in this lecture. On the way we learn a few more things about R and the R language.</p>
</section>
<section id="storing-and-reusing-results" class="level3 page-columns page-full" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="storing-and-reusing-results"><span class="header-section-number">2.2.3</span> Storing and reusing results</h3>
<p>When our operations become just a bit more complex than just typing in a simple arithmetic operation, it becomes useful if we can store answers and use these answers, which might be an intermediate result of some transformed data or something else. In R this problem is solved very easily. We <em>assign</em> the answer to a name we choose ourselves. Here is an example.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">+</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="page-columns page-full"><p>The symbol <code>&lt;-</code> tells R pleas assign to the name <code>a</code> the result of the computation <code>1+1</code>.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn8"><p><sup>8</sup>&nbsp;The assignment operator is used so often that it is useful to type it using a keyboard shortcut instead of typing first <code>&lt;</code>and then <code>-</code>. The same result can be achieved by pressing the <code>ALT</code>key followed by the <code>-</code> key. </p></li></div></div>
<p>Now see why we have said that the assignement has stored your result. Enter on your keyboard the name you have just chosen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>And you can use the stored value to do further computations with it, like</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>a<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>When you assign a new value to the old name <code>a</code>, the old value will be overwritten by the new value.</p>
<p>What names should you use? You could uses actually anything but you have to follow a few rules. A name in R must for example not begin with a number, a dot <code>.</code> or an underscore <code>_</code>. So for example <code>var_1</code>, <code>var.1</code>, <code>var1</code> and <code>VAR1</code> and <code>myVar1</code> are all allowed names but <code>1var</code>, <code>.var</code> and <code>_var1</code> are not</p>
</section>
</section>
<section id="using-r-via-the-jupyter-notebook" class="level2 page-columns page-full" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="using-r-via-the-jupyter-notebook"><span class="header-section-number">2.3</span> Using R via the Jupyter Notebook</h2>
<p>In these first steps we have used R via the console. In this course we will use another powerful tool to use R: The <strong>Jupyter-Notebook</strong>. The notebook is a file format that allows you to store both text and code within one file. It allows you also to produce documents and store them. This has a few big advantages over using R just via the console:</p>
<ol type="1">
<li>It allows you to store your work and to come back to it later.</li>
<li>It also allows you to show your work to a learning facilitator to get feedback or grades as often needed in this course.</li>
<li>It finally allows you to verbally comment your code, so you later - when you come back to it - remember what you have done.</li>
<li>It is a document format that gives you an elegant and powerful tool to report on your data work in the form of a readable and professionally layed out document.</li>
</ol>
<p>Let us show, how the Jupyter-Notebook works. You start the Notebook by double clicking the Jupyter icon in your docker.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Comment for Seitwerk: Please uncollapse
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Here you should demonstrate in a vido how to launch the Jupyter-Notebook in the docker version you have installed for the course.</p>
</div>
</div>
</div>
<p>Upon start Jupyter will show you your directory structure and a navigation pane. On my screen it looks like this: <img src="pictures/jupyter_start.png" class="img-fluid" alt="Jupyter-Start-Screen"> Now you need to navigate to the folder where you would like to store your notebooks. This will be a folder of your choice with a name you have given it. If the directory has been created you can navigate there from the Jupyter menue by just double clicking on the directory names. For instance, in my case the files are stores in my <code>R</code> directory. So I double click <code>R</code> and will then see the subdirectories of <code>R</code>. Then I click on my folder <code>Statistics_JWL</code> because this is where I store my files for this course and in this directory I click <code>notebooks</code> because this is the folder for my Jupyter notebooks. In your case this will be different depending on how you chose to organise your directories.</p>
<p>After navigating to my folder my screen will look like this:</p>
<p><img src="pictures/jupyter_ms.png" class="img-fluid" alt="Jupyter-Directory"> Now in the gry bar you see the directory you are in. In this directory you can create a new notebook-file by selecting the button new in the upper right corner of the screen. When I do this I get a menu of options, like this <img src="pictures/jupyter_type.png" class="img-fluid" alt="Jupyter-Notebook-Type"> In my case I can choose from three options. These options refer to different computing engines, which will do code execution from the notebook. The options might look a bit different in your installation but what is important is that you should have an option <code>R</code> in your pull down menu: Please choose this option.</p>
<p>When you do that you have created a new notebook which will be able to use R as its computing engine and be able to send R commands from the notebook to R as well as receive R output in the notebook. This is the way we will use the Jupyter-Notebook in this course. You should now see a screen like this:</p>
<p><img src="pictures/jupyter-notebook.png" class="img-fluid" alt="Jupyter-Notebook"> You see now the <code>R</code>icon in the upper right corner, you see a menue bar on the top. You also see that the notebook has yet no name and is called Untitled1. Let’s give this notebook a name. In order to do so, you click the File menu, select Save as and then give the file a name: I called mine <code>testbook</code>.</p>
<p>To work with the notebooks for now, you have just to understand very few things beyond how to open Juyter and create a new notebook. Let me explain these few concepts here and then you are ready to go.</p>
<section id="cells" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="cells"><span class="header-section-number">2.3.1</span> Cells</h3>
<p>Jupyter-Notebooks are file formats that can combine code and text and represent these different forms of input in a single documents. Whether something you type is understood by the notebook as a text or as code depends on the type of so called cells.</p>
<p>For example in the new file we created we see a line which is boxed with a color bar on the left. Then its has <code>In []:</code> followed by a kind of ply symbol and then a light gray box, like this:</p>
<p><img src="pictures/jupyter_input_cell.png" class="img-fluid" alt="Jupyter-Notebook_input_Cell"> This is a cell type that can take inputs of <code>R</code> code. You can see this, by looking at the line below the menu bar which says <code>Code</code>. Now let us give the cell some R input like for example the vector of mortality rates in 1860.</p>
<p><img src="pictures/jupyter_mr.png" class="img-fluid" alt="Jupyter Storing mortality rates of 1860 in an object called mr_1860"> Now you can execute the cell by typing SHIFT and ENTER. This executes the cell. This means that the code is sent to R and processed there as if you had typed the same command on the console. Note that something has also changed with the cell. The <code>Input[]:</code> has now be given a number by the notebook. This is the first input the notebook has received in this session and it is recorded. At the same time R has opened a new input cell for code.</p>
<p><img src="pictures/jupyter_new_cell.png" class="img-fluid" alt="Jupyter Code cell executed"> Say now that you want to inspect the object <code>mr_1860</code> in which we have stored the data you just would type this name into the cell and press SHIFT ENTER again. The resulting screen would then look like this:</p>
<p><img src="pictures/jupyter_output.png" class="img-fluid" alt="Jupyter Notebook with output"> Now say you want to write a comment as text. Then you first need to change the type of the cell. To do so go to the pull down menu that says <code>Code</code> and choose Markdown. Now the cell is a textcell which accepts Text and text formatting commands in a markup language called Markdown. For the moment we do not need to know any details about this. The screen will look now as follows</p>
<p><img src="pictures/jupyter_markdown.png" class="img-fluid" alt="Jupyter with Markdown Text Cell"> Now write a text comment into this cell, for example: “These are the percentages of infant mortality in 1860 in a group of European countries” and then press SHIFT ENTER. You will now see a screen like this:</p>
<p><img src="pictures/jupyter_with_text_Md.png" class="img-fluid" alt="Jupyter Notebook with Code and Text Cells"> Now you can safe the file by just clicking the save symbol or choosing the menu File and choose Save and Checkpoint. Then choose in the File menue Close and Halt to close your notebook. You can now open it any time again by double clicking the file in your directory. The Jupyter Notebooks have the file extension <code>ipynb</code>. The file can be uploaded to a platform, attached to an e-mail etc. as with any other file. Anybody who has the Jupyter Notebook software can open the file and read it. If the right software installation is in place the cells can be also correctly executed.</p>
<p>From now on let us do our R stuff with Jupyter Notebooks to make the R work readable to others as well as reproduceable.</p>
</section>
<section id="a-first-data-visualization" class="level3 page-columns page-full" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="a-first-data-visualization"><span class="header-section-number">2.3.2</span> A first data visualization</h3>
<p>We showed the infant mortality rates of a group of European countries before in <a href="#tbl-infant-mortality-1860">Table&nbsp;<span>2.1</span></a> and <a href="#tbl-infant-mortality-2020">Table&nbsp;<span>2.2</span></a>.</p>
<p>Humans are very visual creatures. Thus using our visual system to explore data and absorb information in these data visualizations can be very powerful. To deploy their power, we must - however - follow some principles, which we will learn step by step over this course.</p>
<p>Assume we would like to display the information in our tables in a so called <strong>bar chart</strong>. A bar chart would combine in a plot bars for each country in the table with the bar length proportional to the mortality rate. This will give us a visual impression how the countries differ in one view, which might be more informative as just looking at the numbers themselves in a table.</p>
<section id="functions" class="level4" data-number="2.3.2.1">
<h4 data-number="2.3.2.1" class="anchored" data-anchor-id="functions"><span class="header-section-number">2.3.2.1</span> Functions</h4>
<p>R is not just a calculator and data storage device. What makes R very powerful is that it comes equipped with many functions which we can use to do things with data, like for instance producing plots like a bar chart.</p>
<p>Functions in R have a name followed by parenthesis. In the very first step we typed for example <code>quit()</code> at the prompt. This is a function and by typing its name followed by the parenthesis, R knows that it has to close the program and shut down.</p>
<p>Functions can also have arguments, which we can assign certain values to. For example, R has a function which would round numbers. This function is called <code>round()</code>. It has also arguments. You need to tell R which numbers to round and the number of digits the rounding should consider.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>( <span class="at">x =</span> <span class="fl">2.4356789123456</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.44</code></pre>
</div>
</div>
<p>The first argument in the function <code>round</code> is <code>x</code>. We can give <code>x</code> a value, which we assign by <code>=</code>. The second argument is called <code>digits</code> and we assign to it the value <code>2</code>. The output is then, not very surprisingly, <code>2.44</code>.</p>
<p>Note that R is programmed such that we could also have typed:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">2.4356789123456</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.44</code></pre>
</div>
</div>
<p>R would have known automatically that the first value is assigned to <code>x</code>and the second to <code>digits</code>.</p>
<p>We will encounter a lot of R functions during this course. We will also learn how to access R documentation to know for so many different functions, what is their name, which arguments they accept as input and how we can use them.</p>
</section>
<section id="visualizing-the-infant-mortality-data" class="level4 page-columns page-full" data-number="2.3.2.2">
<h4 data-number="2.3.2.2" class="anchored" data-anchor-id="visualizing-the-infant-mortality-data"><span class="header-section-number">2.3.2.2</span> Visualizing the infant mortality data</h4>
<p>R has a built in function for plotting bar charts, which is called <code>barplot()</code>. Let is make use of this function to show the infant mortality rates of 1860 as a bar chart. The arguments taken by R are the data. Then we can add additional arguments which determine details of the plot display and appearance.</p>
<p>Let us first store the data in an object with the name <code>mr</code>for mortality rates of 1860.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>mr_1860 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.237</span>, <span class="fl">0.139</span>, <span class="fl">0.136</span>, <span class="fl">0.150</span>, <span class="fl">0.260</span>, <span class="fl">0.102</span>, <span class="fl">0.174</span>, <span class="fl">0.124</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here we see another important function of R which we will need all of the time, the <code>c()</code>function. This function concatenates values in a vector of values. So the output of the operation will be a vector <span class="math inline">\((0.237, 0.139, 0.136, 0.150, 0.260, 0.102, 0.174, 0.124)\)</span> with the name <code>mr_1860</code>. Thus when we type</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>mr_1860</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.237 0.139 0.136 0.150 0.260 0.102 0.174 0.124</code></pre>
</div>
</div>
<div class="page-columns page-full"><p>R will print the whole vector as one object. This is why the counting label is [1] and not [8]. The <code>c()</code> function concatenates the number so a single object, a vector containing all eight numbers.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn9"><p><sup>9</sup>&nbsp;In case you are worried about the technical term of a vector, don’t worry. We use this term here losely and not in a rigorous mathematical sense. You can think for the moment of a vector in R as a single object that can hold several data at once, like numbers, or characters. I avoided the term list in the text to avoid confusion with the list data structure which is a special data structure in R which we learn about in the course later.</p></li></div></div>
<p>Now lets see what happens when we give <code>mr_1860</code> as an argument to <code>barplot</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(mr_1860)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="categorical_data_and_proportions_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We see on the y axis the infant mortality rates from 0 to 0.25 and on the x axis a bar for each country with a length proportional to the infant mortality rate in this country.</p>
<p>But here it is difficult to connect the bars to the countries. So let us store the country names in another vector and call them <code>ctr</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>ctr <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Austria"</span>, <span class="st">"Belgium"</span>, <span class="st">"Denmark"</span>, <span class="st">"France"</span>, </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Germany"</span>, <span class="st">"Norway"</span>, <span class="st">"Spain"</span>, <span class="st">"Sweden"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that the names of the countries had to be written between quotation marks <code>" "</code>. This is the way to tell R that the sequence of letters are characters. Characters are a specific data type representing text. Now we have a vector of words, the country names. We can give the country names as an argument to <code>barplot()</code>like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(mr_1860, <span class="at">names.arg =</span> ctr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="categorical_data_and_proportions_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Not too bad.</p>
<p>It would perhaps be more convenient to flip the chart around and interchange the x and the y axes here. This can be done by another argument to <code>barplot()</code>. This argument is called <code>horiz</code> and it assumes a logical value. A logical is another R data type which allows us to express whether something is true or false. Logical true and false values are expressed as <code>TRUE</code> and <code>FALSE</code> in R.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(mr_1860, <span class="at">names.arg =</span> ctr, <span class="at">horiz =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="categorical_data_and_proportions_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This does not yet help much, because this flip of coordinates can only support a better display of the data if the country names are also printed horizontally.</p>
<p>You might guess it already: This can be controlled by another argument which is called in the case of this function <code>las</code>. If <code>las</code> gets value 1 we get what we want.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(mr_1860, <span class="at">names.arg =</span> ctr, <span class="at">horiz =</span> <span class="cn">TRUE</span>, <span class="at">las =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="categorical_data_and_proportions_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now we have visualized the information we had displayed in a table before. It is not yet perfect because the names of countries with longer names are cut off a bit. This could be fixed by additional function arguments, but let us not go too much in the details of the <code>barplot()</code>function at this stage. We will learn a lot about powerful visualization techniques in R as we go along.</p>
<p>Before we close this first encounter with R and data visualization, let me point out an important aspect of bar charts. The visual impression is powerful and truthful, if we choose the origin of the bars carefully. It is usually the best idea to start the bars at zero. So we see clearly the relative lengths and the magnitude of differences in the context of the entire dataset.</p>
<p>Changing the origin with not enough care can visually exaggerate the differences between countries. This is a manipulative visualization, which should be avoided but which is encountered often. So be mindful about the choice of origin in a bar chart.</p>
<p>Let me show you what I mean by telling R, for example, to start the plot of the data for the 1880 data at <span class="math inline">\(0.08\)</span> instead as of <span class="math inline">\(0\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(mr_1860, <span class="at">names.arg =</span> ctr, <span class="at">horiz =</span> <span class="cn">TRUE</span>, <span class="at">las =</span> <span class="dv">1</span>, </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlim =</span> <span class="fu">c</span>(<span class="fl">0.08</span>, <span class="fl">0.275</span>), <span class="at">xpd =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="categorical_data_and_proportions_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Do you see that now the differences appear bigger? The choice of origin can have a big influence on the appearance of differences between the length of the bars. Always be mindful of this effect and reflect what happens if for some reason you have to choose a different origin for the bar chart than zero. Alberto Cairo, who is the author of an influential book on data visualization <span class="citation" data-cites="Cai2016">(<a href="references.html#ref-Cai2016" role="doc-biblioref">Cairo 2016</a>)</span> recommends to always choose a “…<em>logical and meaningful baseline</em>”.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Be mindful in choosing a logical and meaningful origin for barcharts
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you compare porportions visually with a bar chart always think of choosing a logical and meaningful origin. In most cases this will be 0. If 0 is not possible, think about what would be a choice that gives a truthfull and not exaggerated display of differences.</p>
</div>
</div>
<p>Before we close this digression into visualization, let me briefly discuss another aspect of data presentation which you need to consider. The ordering of the rows in the data table, or in this case, the order of the bars in the barchart has to be carefully considered.</p>
<p>If you look at the bar chart we have produced, you see that the bars have an order corresponding to the alphabetical order of the countries, starting with A for Austria and ending with S for Sweden.</p>
<p>Now consider we had ordered the data according to mortality rate like this:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(rate_1860[<span class="fu">order</span>(<span class="sc">-</span>rate_1860<span class="sc">$</span>Mortality) , ]<span class="sc">$</span>Mortality, </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">names.arg =</span> rate_1860[<span class="fu">order</span>(<span class="sc">-</span>rate_1860<span class="sc">$</span>Mortality) , ]<span class="sc">$</span>Country, <span class="at">horiz =</span> <span class="cn">TRUE</span>, <span class="at">las =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="categorical_data_and_proportions_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now the bar chart could suggests that the infant mortality rate is an important and meaningful way of comparing this particular group of countries.</p>
<p>Such ranking comparisons are very popular in the media but they can be misleading. They can be misleading because the differences could be there just by chance.</p>
<p>There could be also systematic differences between countries affecting infant mortality rates. For example, countries that are small with populations under 10 Million and that have very homogeneous populations and low birth rates tend to show lower infant mortality rates just because of these demographic features. So an ordering like the one presented in the graph might suggest a ranking that is in fact spurious and is not really substantial.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Be mindful about order in displaying the data
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you display proportions in a table or a bar chart be mindful of the ordering of data and avoid spurious rankings. Choose a particular ordering only if there is a meaningful and logical reason to do so.</p>
</div>
</div>
</section>
</section>
</section>
<section id="categorical-variables-causes-of-infant-mortality" class="level2 page-columns page-full" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="categorical-variables-causes-of-infant-mortality"><span class="header-section-number">2.4</span> Categorical variables: Causes of infant mortality</h2>
<p>We have discussed binary data. These are data that can take two values, like death or alive, in the examples of infant mortality data we have studied so far. A generalization of binary variables are called <strong>categorical variables</strong> in statistics. Categorical variables are measures that can take two or more values, which can be either unordered, such as eye color, countries or study center locations at which JWL courses take place. They can also be ordered, like positions in a hierarchy.</p>
<p>An example of categorical data arises if we study the issue of infant mortality further and ask for the causes. Why do infants die in the first year of their life?</p>
<div class="page-columns page-full"><p>Here are the causes that have been registered by the Global Burden of Disease Study in 2019 by the Institute for Health Metrics and Evaluation as well as the share of each cause in the overall cases.<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn10"><p><sup>10</sup>&nbsp;See https://www.healthdata.org/gbd/2019</p></li></div></div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read data from JWL package</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(JWL)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>causes <span class="ot">&lt;-</span> infant_mortality_causes</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co"># order by share</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>causes_ordered <span class="ot">&lt;-</span> causes[<span class="fu">order</span>(<span class="sc">-</span>causes<span class="sc">$</span>Share) , ]</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> causes_ordered[, <span class="fu">c</span>(<span class="st">"Entity"</span>, <span class="st">"Share"</span>)]</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Cause"</span>, <span class="st">"Share"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(dat, <span class="at">digits =</span> <span class="dv">3</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="tbl-causes-infant-mortality" class="anchored">
<table class="table table-sm table-striped small">
<caption>Table&nbsp;2.4: Causes of infant mortality</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Cause</th>
<th style="text-align: right;">Share</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Preterm birth</td>
<td style="text-align: right;">0.211</td>
</tr>
<tr class="even">
<td style="text-align: left;">Encephalopathy due to birth asphyxia and trauma</td>
<td style="text-align: right;">0.180</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Lower respiratory infections</td>
<td style="text-align: right;">0.161</td>
</tr>
<tr class="even">
<td style="text-align: left;">Birth defects</td>
<td style="text-align: right;">0.128</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Diarrheal diseases</td>
<td style="text-align: right;">0.092</td>
</tr>
<tr class="even">
<td style="text-align: left;">Heart anomalies</td>
<td style="text-align: right;">0.048</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Malaria</td>
<td style="text-align: right;">0.044</td>
</tr>
<tr class="even">
<td style="text-align: left;">Syphilis</td>
<td style="text-align: right;">0.026</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Meningitis</td>
<td style="text-align: right;">0.020</td>
</tr>
<tr class="even">
<td style="text-align: left;">Whooping cough</td>
<td style="text-align: right;">0.016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Nutritional deficiencies</td>
<td style="text-align: right;">0.015</td>
</tr>
<tr class="even">
<td style="text-align: left;">Digestive anomalies</td>
<td style="text-align: right;">0.013</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sudden infant death syndrome</td>
<td style="text-align: right;">0.009</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tuberculosis</td>
<td style="text-align: right;">0.008</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Measles</td>
<td style="text-align: right;">0.006</td>
</tr>
<tr class="even">
<td style="text-align: left;">HIV/AIDS</td>
<td style="text-align: right;">0.006</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Digestive diseases</td>
<td style="text-align: right;">0.005</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tetanus</td>
<td style="text-align: right;">0.005</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Encephalitis</td>
<td style="text-align: right;">0.003</td>
</tr>
<tr class="even">
<td style="text-align: left;">Acute hepatitis</td>
<td style="text-align: right;">0.002</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Diabetes and kidney diseases</td>
<td style="text-align: right;">0.002</td>
</tr>
</tbody>
</table>
</div>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">#write.csv(dat, file = "tables/table_2_4_infant_mortality_causes.csv", row.names = FALSE)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
This is how an answer can look like.
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Since students have not yet learned subsetting, they need to use the table and retype the values and the causes manually. This is intended because it will familiarize them with the <code>c()</code> function, the difference between numerical and character data type and is an excellent opportunity to review what we did on simple R bar-charts. In the example cause below I use - of course - the convenience of subsetting</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(dat<span class="sc">$</span>Share, </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">names.arg =</span> dat<span class="sc">$</span>Cause, <span class="at">horiz =</span> <span class="cn">TRUE</span>, <span class="at">las =</span> <span class="dv">1</span>, <span class="at">cex.names =</span> <span class="fl">0.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="categorical_data_and_proportions_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
<p>In the news but also in many publications you will often find proportions and how they add up to a total represented in so called pie charts. A pie chart for the causes of infant mortality visualizing our data will look like this</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pie</span>(dat<span class="sc">$</span>Share, <span class="at">labels =</span> dat<span class="sc">$</span>Cause, <span class="at">radius =</span> <span class="dv">1</span>, <span class="at">cex =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="categorical_data_and_proportions_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now compare this to a display of the same information using the bar chart.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(dat<span class="sc">$</span>Share, </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">names.arg =</span> dat<span class="sc">$</span>Cause, <span class="at">horiz =</span> <span class="cn">TRUE</span>, <span class="at">las =</span> <span class="dv">1</span>, <span class="at">cex.names =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="categorical_data_and_proportions_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Apart from some imperfections of displaying the labels in a easily readable way, why does the bar chart work much better for comparing the proportions of causes than the pie chart?</p>
<p>The reason is that the bar chart is supported better by by our visual perception capacity. In the case of the bar chart we have to compare lengths, which our visual system can do well. For decoding the pie we have to compare areas of slices or angles formed by the slices at the circle center. But our visual system does not work well for such tasks. It works even worse, if the display is a three dimensioal pie chart, as offered by various apps. In this case the pie would look like this:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotrix)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pie3D</span>(dat<span class="sc">$</span>Share, <span class="at">labels =</span> dat<span class="sc">$</span>Cause, <span class="at">radius =</span> <span class="dv">1</span>, <span class="at">labelcex =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="categorical_data_and_proportions_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now it is even worse, because our visual system now has to additionally decode perspective on top of area, something it is naturally also not good at.</p>
<p>There are ways to visually display data that work because they are naturally supported by our ability of visual perception and cognition, while others are not.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Don’t use pie charts to visually compare proportions
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you display proportions choose bar charts and avoid pie charts. Bar charts are naturally supported by the ability of our visual system to compare lengths, while pie charts require the comparison of areas and angles, a task our visual system is not so good at.</p>
</div>
</div>
</section>
<section id="compairing-pairs-of-proportions" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="compairing-pairs-of-proportions"><span class="header-section-number">2.5</span> Compairing pairs of proportions</h2>
<p>Often proportions or percentages are used to communicate risks by comparing pairs of proportions.</p>
<p>When pairs of proportions are compared, we need to understand how such comparisons can be made in a meaningful way. Especially in the media it is popular to often run spectacular headlines of how specific behaviors affect your likelihood of developing a disease.</p>
<p>Much of the spectacle in the headlines is due to the exclusive reporting of <em>relative risks</em>. It is important to understand that such statements need to be put into context by also reporting baseline of <em>absolute</em> risk.</p>
<p>Let me illustrate the issue using the example of consuming processed meat and the risk of developing bowel cancer.</p>
<p>From epidemiological research it is known that the chance of a person of developing bowel cancer is based on factors such as meat consumption, the level of physical activity, the body weight or income.</p>
<p>The <em>relative risk</em> is the risk of developing bowel cancer in a group of people compared to another group of people with different behaviors, different physical conditions of different environments.</p>
<p>For instance when we compare meat eaters versus vegetarians, a statement about relative risk would be that the consumption of processed meat increases the risk of developing bowel cancer by 18 %. This sounds spectacular but it does not tell the full story.</p>
<p>To see this go back to our previous example of imagining crowds of people instead of percentages.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_waffle</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">8</span>), <span class="at">rows =</span> <span class="dv">2</span>, <span class="at">use_glyph =</span> <span class="st">"male"</span>, <span class="at">glyph_size =</span> <span class="dv">16</span>, <span class="at">title =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="categorical_data_and_proportions_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Here we have an <em>absolute risk</em> of two out of 10 persons developing bowel cancer. If the relative risk would increase by 50 % this would mean in terms of absolute risk that now we have</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_waffle</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">7</span>), <span class="at">rows =</span> <span class="dv">2</span>, <span class="at">use_glyph =</span> <span class="st">"male"</span>, <span class="at">glyph_size =</span> <span class="dv">16</span>, <span class="at">title =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="categorical_data_and_proportions_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The risk increases now to three out of 10.</p>
<p>These examples illustrate that you need baseline or absolute risks as a vital information to understand what an 18 % increase in risk really means.</p>
<p>Going back to the example of processed meat consumption and bowel cancer risk, the estimated lifetime risk of developing bowel cancer is 5.6 %. Expressed as a relative frequency this is about 6 out of 100 or in a chart</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_waffle</span>(<span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">94</span>), <span class="at">rows =</span> <span class="dv">5</span>, <span class="at">use_glyph =</span> <span class="st">"male"</span>, <span class="at">glyph_size =</span> <span class="dv">13</span>, <span class="at">title =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="categorical_data_and_proportions_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The estimated life time risk of developing bowel cancer if you eat 50 g of processed meat per day increases your relative risk by 18 %. At this heightened risk level the new absolute risk is now 6.6 % or about 7 out of 100</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_waffle</span>(<span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">1</span>, <span class="dv">93</span>), <span class="at">rows =</span> <span class="dv">5</span>, <span class="at">use_glyph =</span> <span class="st">"male"</span>, <span class="at">glyph_size =</span> <span class="dv">13</span>, <span class="at">title =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="categorical_data_and_proportions_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In the research literature proportions are often expressed by the <em>odds ratio</em>. This ratio expresses the chance of an event happening relative to the chance of an event not happening. In the example of processed meat and bowel cancer this would be <span class="math inline">\(6/94\)</span>, because 6 out of hundered people develop bowel cancer in their life time and 94 out of hundred do not. While odds are very common in the research literture they are not a very intuitive way to communicate the comparison of proportions. Spiegelhalter, from whom I took this example therefore recommends not to use odds ratios outside a scientific context, since it easily invites misunderstanding.</p>
</section>
<section id="exercises" class="level2 page-columns page-full" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="exercises"><span class="header-section-number">2.6</span> Exercises</h2>
<p>A note on exercises. Exercises will help you to actively remember the concepts you, learn, they will help you to practice applying these concepts to problems and develop your competence and skills. The exercises will be divided into two categories.</p>
<p><strong>Exercises</strong> will ask questions related to the study material. They will help you remembering the concepts learned. They will also help you to test and develop your understanding by applying the concepts to various situations, some similar but slightly different than in the text. This will help you develop your skills, aqcuring routine through practice and reflect in your understanding.</p>
<p><strong>Exercises R</strong> will be exercises for which you will need the computer and access to your digital tools like R and the Jupyter notebook. These exercises will be very important. They support you in developing your computer skills and gain practice in modern data analysis. Data analysis today is always done using a computer. You should consider these as an integral part of your general skills in statistics.</p>
<p><strong>Exercises Project</strong> will be exercises related to a long term project which requires from you a continuous development done unit by unit and cumulatively drawing on the skills you learned during the course. It will also need the computer and your use of R and the Jupyter notebook. The project we are going to work on during this course is called: “People count: The future of humanity in pictures and numbers”. In this project we will apply what we learned in this data to the application of statistical techniques to understand data about demography. Demography is the study of the characteristics of human populations, such as size, growth, density, distribution, and vital statistics.</p>
<p>The exercises will also be graded and solving them is an essential part of documenting your learning process and determining whether you will successfully finish this course.</p>
<section id="exercises-1" class="level3" data-number="2.6.1">
<h3 data-number="2.6.1" class="anchored" data-anchor-id="exercises-1"><span class="header-section-number">2.6.1</span> Exercises</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 1: Refresh your knowledge of computing with percentages
</div>
</div>
<div class="callout-body-container callout-body">
<p>Compute and report the reduction in the share of infant mortality for each of the 8 countries between 1860 and 2020 based on the numbers reported in <a href="#tbl-infant-mortality-1860">Table&nbsp;<span>2.1</span></a> and <a href="#tbl-infant-mortality-2020">Table&nbsp;<span>2.2</span></a>. You can do this with pencil and paper. You could do it also using the computer. When you report your result use a Jupyter-Notebook</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 2: Framing
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the text we gave as an example of framing the reporting of infant mortality by the percentage of infant-deaths and equivalently as infant-survivals. Can you think of another example of framing i.e.&nbsp;an example where you would report the same information in two different ways ?</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 3: Communicating counts and proportions
</div>
</div>
<div class="callout-body-container callout-body">
<p>David Spiegelhalter <span class="citation" data-cites="Spi2019">(<a href="references.html#ref-Spi2019" role="doc-biblioref">Spiegelhalter 2019</a>)</span> whose book we have encountered when we discussed the question of how many trees there are on the planet, describes an advertisement in the London Underground, saying that 99 % of young Londoners do not commit serious crimes. The add was presumably intended to reassure passengers that riding on the London Underground is very safe. Try to imagine what this statement would mean when you think about this information in terms of crowds of young Londoners, assuming that “young” means between 15 and 25. Try to exlpain how the same information presented differently may have a different impact. What kind of communication tools we have just heard about, have been applied here?</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 4: Absolute and relative risk when comparing proportions
</div>
</div>
<div class="callout-body-container callout-body">
<p>Go back to the first example in the section comparing pairs of proportions. Assume the absolute risk is 4 out of 10 and the relative risk increase is 50 %. How many out of 10 are now at risk?</p>
</div>
</div>
</section>
<section id="exercises-r" class="level3" data-number="2.6.2">
<h3 data-number="2.6.2" class="anchored" data-anchor-id="exercises-r"><span class="header-section-number">2.6.2</span> Exercises R</h3>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 1: Transforming percentages into rates using R
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use R to transform the mortality numbers reported in percent in <a href="#tbl-infant-mortality-1860">Table&nbsp;<span>2.1</span></a> and <a href="#tbl-infant-mortality-2020">Table&nbsp;<span>2.2</span></a> in mortality rates, i.e.&nbsp;the (approximate) number of infant-deaths per 1000 life births.</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 2: Your first barplot
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use R to redo the barplot visualization we just did for the 1860 data for the 2020 data.</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 3: A bar chart on the causes of infant mortality
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use R to visualize the table of causes of infant mortality <a href="#tbl-causes-infant-mortality">Table&nbsp;<span>2.4</span></a> in a barchart. Don’t worry if some of the causes are cut off at the left of the graph. We will learn during the course how to better control the appearance of a visualization and control for details like this.</p>
</div>
</div>
</section>
<section id="project-people-count.-unit-1" class="level3 page-columns page-full" data-number="2.6.3">
<h3 data-number="2.6.3" class="anchored" data-anchor-id="project-people-count.-unit-1"><span class="header-section-number">2.6.3</span> Project People Count. Unit 1</h3>
<p>In this course we will follow a larger project which we will call <strong>People count and their data stories</strong>. You will develop this project unit by unit adding new material as we go along. At each step you are going to apply concepts you learned in the unit. When you add the individual steps you will at the end have a data driven story of humanity in a few very interesting numbers and charts. It will help you understand some key aspect about humanity and its past and destination.</p>
<p>In this section we begin with counting people. We will use a variant of our first visualization tool we have learned in this lesson, the bar chart. In this first part we are applying what we have learned in this unit by counting people in Kenya. Like in all countries in the world, national statistical offices describe people living in a country by age, sex, race, education, and a number of other factors. Are these descriptions important?</p>
<p>In particular in this project we ask whether the description of a country by age groups does help us better understand a country? We are going to study the “shape” of Keynia based on the counts of people living in the country by age.</p>
<p>As in real life national statistics we are going to produce data visualizations that display the data by way of barplots and other summaries. These descriptions begin to unpack stories about people living in this country. Behind these numbers and graphs are real people, their sisters and brothers and parents and nieces and nephews. The stories revealed in these data help us better understand a particular country.</p>
<div class="page-columns page-full"><p>The following table shows the counts of women and men in Kenya in the year 2022. The data are made available through an international demographic database, which compiles the local information from national statistical authorities and provide the data publicly via a website hosted by the Census Bureau of the United States.<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn11"><p><sup>11</sup>&nbsp;The website is here https://www.census.gov/programs-surveys/international-programs/about/idb.html and I have retrieved the data from this site.</p></li></div></div>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Age</th>
<th style="text-align: right;">Number of Women</th>
<th style="text-align: right;">Number of Men</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0-4</td>
<td style="text-align: right;">3487490</td>
<td style="text-align: right;">3531278</td>
</tr>
<tr class="even">
<td style="text-align: left;">5-9</td>
<td style="text-align: right;">3404421</td>
<td style="text-align: right;">3431166</td>
</tr>
<tr class="odd">
<td style="text-align: left;">10-14</td>
<td style="text-align: right;">3444606</td>
<td style="text-align: right;">3473103</td>
</tr>
<tr class="even">
<td style="text-align: left;">15-19</td>
<td style="text-align: right;">3225971</td>
<td style="text-align: right;">3249738</td>
</tr>
<tr class="odd">
<td style="text-align: left;">20-24</td>
<td style="text-align: right;">2656730</td>
<td style="text-align: right;">2664966</td>
</tr>
<tr class="even">
<td style="text-align: left;">30-34</td>
<td style="text-align: right;">1946994</td>
<td style="text-align: right;">1926219</td>
</tr>
<tr class="odd">
<td style="text-align: left;">40-44</td>
<td style="text-align: right;">1606763</td>
<td style="text-align: right;">1610246</td>
</tr>
<tr class="even">
<td style="text-align: left;">45-49</td>
<td style="text-align: right;">1170869</td>
<td style="text-align: right;">1196519</td>
</tr>
<tr class="odd">
<td style="text-align: left;">50-54</td>
<td style="text-align: right;">858998</td>
<td style="text-align: right;">890662</td>
</tr>
<tr class="even">
<td style="text-align: left;">55-59</td>
<td style="text-align: right;">672025</td>
<td style="text-align: right;">679943</td>
</tr>
<tr class="odd">
<td style="text-align: left;">60-64</td>
<td style="text-align: right;">516769</td>
<td style="text-align: right;">488074</td>
</tr>
<tr class="even">
<td style="text-align: left;">65-69</td>
<td style="text-align: right;">387773</td>
<td style="text-align: right;">340546</td>
</tr>
<tr class="odd">
<td style="text-align: left;">70-74</td>
<td style="text-align: right;">272320</td>
<td style="text-align: right;">229912</td>
</tr>
<tr class="even">
<td style="text-align: left;">75-79</td>
<td style="text-align: right;">168499</td>
<td style="text-align: right;">138357</td>
</tr>
<tr class="odd">
<td style="text-align: left;">80-84</td>
<td style="text-align: right;">93724</td>
<td style="text-align: right;">73093</td>
</tr>
<tr class="even">
<td style="text-align: left;">85-89</td>
<td style="text-align: right;">39226</td>
<td style="text-align: right;">28473</td>
</tr>
<tr class="odd">
<td style="text-align: left;">90-94</td>
<td style="text-align: right;">10461</td>
<td style="text-align: right;">6918</td>
</tr>
<tr class="even">
<td style="text-align: left;">95-99</td>
<td style="text-align: right;">1520</td>
<td style="text-align: right;">902</td>
</tr>
</tbody>
</table>
<ol type="1">
<li><p>Produce a barplot of the total population with R. Also produce a separate barplot for men and women.</p></li>
<li><p>Demographers usually use the following terminology: A population distribution is defined by the following layers: The <strong>bottom-layer</strong> in terms of age group refers to the counts of people in the 0 to 24 years old age groups. The <strong>lower middle-layer</strong> refers to the counts of people in the 25 to 49 years old age groups. The <strong>upper middle-layer</strong> refers to the count of people in the 50 to 74 years old age groups. The top layer refers to the count of people in the 75 to 100+ years old age groups. Depending on which layer is the largest a country’s “shape” is defined by demographers as a bottom-layered a middle layered and a top layered country. Use R to do a horizontal box-plot where the number of people in each age group are shown in percent. For computing the percentages you will need the total number of people over all age groups. Fortunately R has a function for this. It is called <code>sum()</code> and is applied as follows: Assume you have a vector <code>x  &lt;- c(1,4,5)</code>, then using the sum function <code>sum(x)</code> you will get 10 in this example.</p></li>
<li><p>Identify two age groups in which the number of people in one age group is approximately double the count in the other age group.</p></li>
<li><p>“Old” and “young” are subjective descriptions that in many cases are defined by several factors other than age (for example, health status, or income status). For this unit, however, consider the definition of “young” as people less than 10 years old, and the definition of “old” as people who are 65 years old or older. What is the ratio of “old” to “young” using the above definitions of young and old?</p></li>
<li><p>If there are approximately 500 students in a typical school for students who are 5 to 14 years old, estimate the number of schools needed to educate the students who are 5 to 14 years old.</p></li>
<li><p>Here is an R challenge that you can do, if you have enough time left and if you love challenges. It will not This will not be graded. It is an option to give this challenge a try. You can also come back to it later, when you have more experience with R. When you have no time, just leave it out.</p></li>
</ol>
<p>Demographers, have a very nice visualization of population counts by 5 year age groups and by sex, which are called “population pyramids”. These graphs are a very nice example of the power of data visualization, because they convey at one glance whether a particular country is a bottom, middle layered or a top layered country and how the relative cohort sizes of men and women look like for each age cohort.</p>
<p>It looks approximately like this:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pictures/pop_pyramid_example.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Example of a population pyramid</figcaption>
</figure>
</div>
<p>Could you construct a similar graph for the Kenya data using the barplot function and R’s graphics options? You might consult the help function, or the internet when you have internet access.</p>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-VolAtk2013" class="csl-entry" role="listitem">
Antony, Volk, and Atkinson Jeremy. 2013. <span>“Infant and Child Death in the Human Environment of Evolutionary Adaptation.”</span> <em>Evolution and Human Behavior</em> 34: 182–92.
</div>
<div id="ref-Cai2016" class="csl-entry" role="listitem">
Cairo, Alberto. 2016. <em>The Truthful Art: Data, Charts, and Maps for Communication</em>. New Riders.
</div>
<div id="ref-Ros" class="csl-entry" role="listitem">
Roser, Max. 2019. <span>“Child Mortality Is an Everyday Tragedy of Enormous Scale That Rarely Makes the Headlines.”</span> <a href="https://ourworldindata.org/child-mortality-everyday-tragedy-no-headlines" class="uri">https://ourworldindata.org/child-mortality-everyday-tragedy-no-headlines</a>.
</div>
<div id="ref-Smil2020" class="csl-entry" role="listitem">
Smil, Vaclav. 2020. <em>Numbers Don’t Lie: 71 Things You Need to Know about the World</em>. Penguin Books.
</div>
<div id="ref-Spi2019" class="csl-entry" role="listitem">
Spiegelhalter, David. 2019. <em>The Art of Statistcis: Learning from Data</em>. Pelican Books.
</div>
<div id="ref-JSSv059i10" class="csl-entry" role="listitem">
Wickham, Hadley. 2014. <span>“Tidy Data.”</span> <em>Journal of Statistical Software</em> 59 (10): 1–23. <a href="https://doi.org/10.18637/jss.v059.i10">https://doi.org/10.18637/jss.v059.i10</a>.
</div>
</div>
</section>
</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./introduction.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title"><strong>Introduction</strong></span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./summarizing_and_communicating_lots_of_data.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Summarizing and communicating lots of data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>